AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     1


MACRO ASSEMBLER AX51 V3.06a
OBJECT MODULE PLACED IN .\eco_page.obj
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\AX51.exe .\eco_page.src EP DEBUG SYMBOLS OJ(.\eco_page.obj) PR(.\eco_page.ls1) 

LOC    OBJ             LINE     SOURCE

                          1     ; ./eco_page.src generated from: .\eco_page.c
                          2     ; COMPILER INVOKED BY:
                          3     ;        C:\Keil\C51\BIN\C51.exe .\eco_page.c BROWSE DEBUG CODE LISTINCLUDE SYMBOLS PREP
                               RINT ROM(LARGE) INCDIR(../../Include) SRC(./eco_page.src)
                          4     
                          5     $nomod51 
                          6     
                          7     NAME    ECO_PAGE
                          8     
 00A0.7                   9     PWR_UP  BIT     0A0H.7
 0080                    10     P0      DATA    080H
 0090                    11     P1      DATA    090H
 00D0.6                  12     AC      BIT     0D0H.6
 0080.5                  13     T0      BIT     080H.5
 00B3                    14     SPI_CTRL        DATA    0B3H
 0080.6                  15     T1      BIT     080H.6
 00A8.7                  16     EA      BIT     0A8H.7
 0090.0                  17     T2      BIT     090H.0
 00A0.6                  18     CE      BIT     0A0H.6
 00BE                    19     DEV_OFFSET      DATA    0BEH
 00A0.1                  20     CLK1    BIT     0A0H.1
 0090.2                  21     DIN0    BIT     090H.2
 00A0.5                  22     CLK2    BIT     0A0H.5
 0090.0                  23     DIO0    BIT     090H.0
 0083                    24     DPH0    DATA    083H
 0090.1                  25     DIO1    BIT     090H.1
 00A8                    26     IE      DATA    0A8H
 0085                    27     DPH1    DATA    085H
 0080.0                  28     DIO2    BIT     080H.0
 0080.1                  29     DIO3    BIT     080H.1
 0080.0                  30     P0_0    BIT     080H.0
 0090.0                  31     P1_0    BIT     090H.0
 0080.2                  32     DIO4    BIT     080H.2
 0080.1                  33     P0_1    BIT     080H.1
 0082                    34     DPL0    DATA    082H
 0090.1                  35     P1_1    BIT     090H.1
 0080.3                  36     DIO5    BIT     080H.3
 0080.2                  37     P0_2    BIT     080H.2
 0084                    38     DPL1    DATA    084H
 0090.2                  39     P1_2    BIT     090H.2
 0080.4                  40     DIO6    BIT     080H.4
 0080.3                  41     P0_3    BIT     080H.3
 0080.5                  42     DIO7    BIT     080H.5
 0080.4                  43     P0_4    BIT     080H.4
 00A4                    44     ADCSTATIC       DATA    0A4H
 0080.6                  45     DIO8    BIT     080H.6
 0080.5                  46     P0_5    BIT     080H.5
 00C8.6                  47     EXF2    BIT     0C8H.6
 00A0.3                  48     CS      BIT     0A0H.3
 0080.7                  49     DIO9    BIT     080H.7
 0080.6                  50     P0_6    BIT     080H.6
 0080.7                  51     P0_7    BIT     080H.7
 00A8.4                  52     ES      BIT     0A8H.4
 00B8                    53     IP      DATA    0B8H
 00A0.0                  54     DATA?   BIT     0A0H.0
 0098.0                  55     RI      BIT     098H.0
 00D0.7                  56     CY      BIT     0D0H.7
 0098.1                  57     TI      BIT     098H.1
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     2

 00BC                    58     T1_1V2  DATA    0BCH
 008F                    59     SPC_FNC DATA    08FH
 00BD                    60     T2_1V2  DATA    0BDH
 00CB                    61     RCAP2H  DATA    0CBH
 00B8.4                  62     PS      BIT     0B8H.4
 0081                    63     SP      DATA    081H
 00D0.2                  64     OV      BIT     0D0H.2
 00B6                    65     CK_CTRL DATA    0B6H
 00CA                    66     RCAP2L  DATA    0CAH
 00B5                    67     TICK_DV DATA    0B5H
 00B1                    68     RSTREAS DATA    0B1H
 00C8.1                  69     C_T2    BIT     0C8H.1
 00E8.4                  70     EWDI    BIT     0E8H.4
 00A1                    71     ADCCON  DATA    0A1H
 00C8.5                  72     RCLK    BIT     0C8H.5
 00A2                    73     ADCDATAH        DATA    0A2H
 0091                    74     EXIF    DATA    091H
 00C8.4                  75     TCLK    BIT     0C8H.4
 00A0.6                  76     DR2_CE  BIT     0A0H.6
 00A3                    77     ADCDATAL        DATA    0A3H
 0099                    78     SBUF    DATA    099H
 0087                    79     PCON    DATA    087H
 0098                    80     SCON    DATA    098H
 00F8.4                  81     PWDI    BIT     0F8H.4
 0089                    82     TMOD    DATA    089H
 0088                    83     TCON    DATA    088H
 00D8.3                  84     WDTI    BIT     0D8H.3
 00AA                    85     PWMDUTY DATA    0AAH
 0088.1                  86     IE0     BIT     088H.1
 0088.3                  87     IE1     BIT     088H.3
 0094                    88     P0_DIR  DATA    094H
 00F0                    89     B       DATA    0F0H
 0096                    90     P1_DIR  DATA    096H
 0095                    91     P0_ALT  DATA    095H
 0097                    92     P1_ALT  DATA    097H
 00C8.0                  93     CP_RL2  BIT     0C8H.0
 00A0.2                  94     DR1     BIT     0A0H.2
 00E0                    95     ACC     DATA    0E0H
 00A0.6                  96     DR2     BIT     0A0H.6
 00B7                    97     TEST_MODE       DATA    0B7H
 00B4                    98     SPICLK  DATA    0B4H
 00C8.1                  99     CT2     BIT     0C8H.1
 00A8.1                 100     ET0     BIT     0A8H.1
 00A8.3                 101     ET1     BIT     0A8H.3
 0088.5                 102     TF0     BIT     088H.5
 0080.3                 103     INT0_N  BIT     080H.3
 00A8.5                 104     ET2     BIT     0A8H.5
 0088.7                 105     TF1     BIT     088H.7
 0080.4                 106     INT1_N  BIT     080H.4
 00C8.7                 107     TF2     BIT     0C8H.7
 0098.2                 108     RB8     BIT     098H.2
 008C                   109     TH0     DATA    08CH
 00A8.0                 110     EX0     BIT     0A8H.0
 0088.0                 111     IT0     BIT     088H.0
 008D                   112     TH1     DATA    08DH
 00A8.2                 113     EX1     BIT     0A8H.2
 0098.3                 114     TB8     BIT     098H.3
 0088.2                 115     IT1     BIT     088H.2
 00CD                   116     TH2     DATA    0CDH
 00AD                   117     REGX_CTRL       DATA    0ADH
 00E8.0                 118     EX2     BIT     0E8H.0
 00D0.0                 119     P       BIT     0D0H.0
 00E8.1                 120     EX3     BIT     0E8H.1
 0098.7                 121     SM0     BIT     098H.7
 008A                   122     TL0     DATA    08AH
 00E8.2                 123     EX4     BIT     0E8H.2
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     3

 0098.6                 124     SM1     BIT     098H.6
 008B                   125     TL1     DATA    08BH
 00E8.3                 126     EX5     BIT     0E8H.3
 0098.5                 127     SM2     BIT     098H.5
 00CC                   128     TL2     DATA    0CCH
 00E8                   129     EIE     DATA    0E8H
 00B8.1                 130     PT0     BIT     0B8H.1
 00D0.3                 131     RS0     BIT     0D0H.3
 00B8.3                 132     PT1     BIT     0B8H.3
 00D0.4                 133     RS1     BIT     0D0H.4
 00B8.5                 134     PT2     BIT     0B8H.5
 0088.4                 135     TR0     BIT     088H.4
 00A9                   136     PWMCON  DATA    0A9H
 0088.6                 137     TR1     BIT     088H.6
 00C8.2                 138     TR2     BIT     0C8H.2
 00B8.0                 139     PX0     BIT     0B8H.0
 00B8.2                 140     PX1     BIT     0B8H.2
 00F8.0                 141     PX2     BIT     0F8H.0
 00F8.1                 142     PX3     BIT     0F8H.1
 00F8.2                 143     PX4     BIT     0F8H.2
 0083                   144     DPH     DATA    083H
 00F8.3                 145     PX5     BIT     0F8H.3
 00F8                   146     EIP     DATA    0F8H
 0082                   147     DPL     DATA    082H
 00C8.3                 148     EXEN2   BIT     0C8H.3
 00C8.0                 149     CPRL2   BIT     0C8H.0
 0098.4                 150     REN     BIT     098H.4
 00C8                   151     T2CON   DATA    0C8H
 0086                   152     DPS     DATA    086H
 00B2                   153     SPI_DATA        DATA    0B2H
 0092                   154     MPAGE   DATA    092H
 0080.1                 155     RXD     BIT     080H.1
 00A0.4                 156     DOUT2   BIT     0A0H.4
 00D8                   157     EICON   DATA    0D8H
 008E                   158     CKCON   DATA    08EH
 0080.2                 159     TXD     BIT     080H.2
 00A0                   160     RADIO   DATA    0A0H
 0080.7                 161     PWM     BIT     080H.7
 00D0.5                 162     F0      BIT     0D0H.5
 00D0.1                 163     F1      BIT     0D0H.1
 00AC                   164     REGX_LSB        DATA    0ACH
 00D0                   165     PSW     DATA    0D0H
 00AB                   166     REGX_MSB        DATA    0ABH
------                  167     ?PR?eco_page_init?ECO_PAGE               SEGMENT CODE 
------                  168     ?PR?eco_page_manager?ECO_PAGE            SEGMENT CODE 
------                  169     ?DT?eco_page_manager?ECO_PAGE            SEGMENT DATA OVERLAYABLE 
------                  170     ?ID?ECO_PAGE         SEGMENT IDATA 
------                  171     ?DT?ECO_PAGE         SEGMENT DATA 
                        172             EXTRN   CODE (_eeprom_read)
                        173             EXTRN   CODE (?C?ICALL2)
                        174             EXTRN   CODE (eeprom_init)
                        175             EXTRN   CODE (?C?UIDIV)
                        176             PUBLIC  ECO_PAGE_TABLE_INDEX
                        177             PUBLIC  ECO_PAGE_REGISTER7
                        178             PUBLIC  ECO_PAGE_REGISTER6
                        179             PUBLIC  ECO_PAGE_REGISTER5
                        180             PUBLIC  ECO_PAGE_REGISTER4
                        181             PUBLIC  ECO_PAGE_ADDR
                        182             PUBLIC  ECO_PAGE_REGISTER3
                        183             PUBLIC  ECO_PAGE_REGISTER2
                        184             PUBLIC  ECO_PAGE_REGISTER1
                        185             PUBLIC  ECO_PAGE_PREV_VID
                        186             PUBLIC  ECO_PAGE_PREV_PID
                        187             PUBLIC  ECO_PAGE_SPI_CONN
                        188             PUBLIC  ECO_PAGE_TABLE
                        189             PUBLIC  eco_page_manager
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     4

                        190             PUBLIC  eco_page_init
                        191     
------                  192             RSEG  ?DT?eco_page_manager?ECO_PAGE
000000                  193     ?eco_page_manager?BYTE:
000004                  194             ORG  4
000004                  195             seg?140:   DS   2
000006                  196             ORG  6
000006                  197               j?141:   DS   2
000000                  198             ORG  0
000000                  199               i?142:   DS   2
000002                  200             ORG  2
000002                  201      page_index?143:   DS   2
                        202     
------                  203             RSEG  ?ID?ECO_PAGE
000000                  204      ECO_PAGE_TABLE:   DS   6
000006                  205     ECO_PAGE_REGISTER1:   DS   1
000007                  206     ECO_PAGE_REGISTER2:   DS   1
000008                  207     ECO_PAGE_REGISTER3:   DS   1
000009                  208     ECO_PAGE_REGISTER4:   DS   1
00000A                  209     ECO_PAGE_REGISTER5:   DS   1
00000B                  210     ECO_PAGE_REGISTER6:   DS   1
00000C                  211     ECO_PAGE_REGISTER7:   DS   1
                        212     
------                  213             RSEG  ?DT?ECO_PAGE
000000                  214     ECO_PAGE_SPI_CONN:   DS   1
000001                  215     ECO_PAGE_PREV_PID:   DS   2
000003                  216     ECO_PAGE_PREV_VID:   DS   2
000005                  217       ECO_PAGE_ADDR:   DS   2
000007                  218     ECO_PAGE_TABLE_INDEX:   DS   1
                        219     ; /*
                        220     ;  * Author(s): Wei-Han Chen (Embedded Platform Lab, NTHU)
                        221     ;  * Copyright (c) 2009 National Tsing Hua University (NTHU) 
                        222     ;  * Permission to copy, modify, and distribute this program is granted 
                        223     ;  * for noncommercial purposes, provided the author(s) and copyright
                        224     ;  * notice are retained. All other uses require explicit written
                        225     ;  * permission from NTHU. 
                        226     ;  *
                        227     ;  * Eco Paging Library 
                        228     ;  *
                        229     ;  * Wei-Han Chen <xwaynec@gmail.com> 
                        230     ;  * 2009/2/13
                        231     ;  */
                        232     ; 
                        233     ; #include "eco_page.h"
                        234     ; #include "eeprom/eeprom.h"
                        235     ; 
                        236     ; //control page replacement policy is LRU or Round-Robin
                        237     ; #define PAGE_REPLACEMENT 0
                        238     ; 
                        239     ; //#define ECO_PAGE_SIZE 256
                        240     ; //#define ECO_PAGE_ADDR_OFFSET 11 
                        241     ; 
                        242     ; 
                        243     ; //#define ECO_PAGE_SIZE 128
                        244     ; //#define ECO_PAGE_ADDR_OFFSET 23
                        245     ; 
                        246     ; 
                        247     ; 
                        248     ; //#define ECO_PAGE_SIZE 64
                        249     ; //#define ECO_PAGE_ADDR_OFFSET 47
                        250     ; 
                        251     ; 
                        252     ; #define ECO_PAGE_SIZE 64
                        253     ; #define ECO_PAGE_ADDR_OFFSET 61
                        254     ; 
                        255     ; 
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     5

                        256     ; #if ECO_PAGE_SIZE == 64
                        257     ;       
                        258     ;       #define ECO_PAGE_ENTRY  (64-ECO_PAGE_ADDR_OFFSET)
                        259     ;       #define ECO_PAGE_SHIFT  6
                        260     ;       #define ECO_PAGE_MASK   0x003F
                        261     ;       #define ECO_PAGE_MOV_MASK       0xFFC0
                        262     ; 
                        263     ;       unsigned int idata ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        264     ;       //Eco page virtual address id
                        265     ;       unsigned int ECO_PAGE_PREV_VID;
                        266     ;       //Eco page physical address id 
                        267     ;       unsigned int ECO_PAGE_PREV_PID;
                        268     ; 
                        269     ; #elif ECO_PAGE_SIZE == 128
                        270     ;       
                        271     ;       #define ECO_PAGE_ENTRY (32-ECO_PAGE_ADDR_OFFSET)
                        272     ;       #define ECO_PAGE_SHIFT  7
                        273     ;       #define ECO_PAGE_MASK   0x007F
                        274     ;       #define ECO_PAGE_MOV_MASK       0xFF80
                        275     ; 
                        276     ;       unsigned int idata ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        277     ;       //Eco page virtual address id
                        278     ;       unsigned int ECO_PAGE_PREV_VID;
                        279     ;       //Eco page physical address id 
                        280     ;       unsigned int ECO_PAGE_PREV_PID;
                        281     ; 
                        282     ; #elif ECO_PAGE_SIZE == 256
                        283     ;       
                        284     ;       #define ECO_PAGE_ENTRY  (16-ECO_PAGE_ADDR_OFFSET)
                        285     ;       #define ECO_PAGE_SHIFT  8       
                        286     ;       #define ECO_PAGE_MASK   0x00FF
                        287     ;       #define ECO_PAGE_MOV_MASK       0xFF00
                        288     ; 
                        289     ;       unsigned int ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        290     ;       //Eco page virtual address id
                        291     ;       unsigned char ECO_PAGE_PREV_VID;
                        292     ;       //Eco page physical address id 
                        293     ;       unsigned char ECO_PAGE_PREV_PID;
                        294     ; 
                        295     ; #endif
                        296     ; 
                        297     ; unsigned char ECO_PAGE_TABLE_INDEX;
                        298     ; unsigned int ECO_PAGE_ADDR;
                        299     ; unsigned char ECO_PAGE_SPI_CONN;
                        300     ; 
                        301     ; unsigned char idata ECO_PAGE_REGISTER1;
                        302     ; unsigned char idata ECO_PAGE_REGISTER2;
                        303     ; unsigned char idata ECO_PAGE_REGISTER3;
                        304     ; unsigned char idata ECO_PAGE_REGISTER4;
                        305     ; unsigned char idata ECO_PAGE_REGISTER5;
                        306     ; unsigned char idata ECO_PAGE_REGISTER6;
                        307     ; unsigned char idata ECO_PAGE_REGISTER7;
                        308     ; 
                        309     ; 
                        310     ; void eco_page_init()
                        311     
------                  312             RSEG  ?PR?eco_page_init?ECO_PAGE
000000                  313     eco_page_init:
                        314                             ; SOURCE LINE # 92
                        315     ; {
                        316                             ; SOURCE LINE # 93
                        317     ;       //ECO_PAGE_TABLE_INDEX = ECO_PAGE_ENTRY - 1;
                        318     ;       ECO_PAGE_TABLE_INDEX = 0;       
                        319                             ; SOURCE LINE # 95
000000 E4               320             CLR     A
000001 F500       F     321             MOV     ECO_PAGE_TABLE_INDEX,A
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     6

                        322     ;       ECO_PAGE_ADDR = 0;
                        323                             ; SOURCE LINE # 96
000003 F500       F     324             MOV     ECO_PAGE_ADDR,A
000005 F500       F     325             MOV     ECO_PAGE_ADDR+01H,A
                        326     ;       ECO_PAGE_PREV_VID = 0;
                        327                             ; SOURCE LINE # 97
000007 F500       F     328             MOV     ECO_PAGE_PREV_VID,A
000009 F500       F     329             MOV     ECO_PAGE_PREV_VID+01H,A
                        330     ;       ECO_PAGE_PREV_PID = 0;
                        331                             ; SOURCE LINE # 98
00000B F500       F     332             MOV     ECO_PAGE_PREV_PID,A
00000D F500       F     333             MOV     ECO_PAGE_PREV_PID+01H,A
                        334     ; }
                        335                             ; SOURCE LINE # 99
00000F 22               336             RET     
                        337     ; END OF eco_page_init
                        338     
                        339     ; 
                        340     ; 
                        341     ; #if PAGE_REPLACEMENT == 0 
                        342     ; //LRU page replacement
                        343     ; void eco_page_manager()
                        344     
------                  345             RSEG  ?PR?eco_page_manager?ECO_PAGE
000000                  346     eco_page_manager:
                        347             USING   0
                        348                             ; SOURCE LINE # 104
                        349     ; {
                        350                             ; SOURCE LINE # 105
                        351     ;       unsigned int i;
                        352     ;       unsigned int page_index = -1;
                        353                             ; SOURCE LINE # 107
000000 74FF             354             MOV     A,#0FFH
000002 F500       F     355             MOV     page_index?143,A
000004 F500       F     356             MOV     page_index?143+01H,A
                        357     ; 
                        358     ;       //if page id is the same with the last page id
                        359     ;       if((ECO_PAGE_ADDR >> ECO_PAGE_SHIFT) == ECO_PAGE_PREV_PID)
                        360                             ; SOURCE LINE # 110
000006 E500       F     361             MOV     A,ECO_PAGE_ADDR+01H
000008 AE00       F     362             MOV     R6,ECO_PAGE_ADDR
00000A 7806             363             MOV     R0,#06H
00000C                  364     ?C0018:
00000C CE               365             XCH     A,R6
00000D C3               366             CLR     C
00000E 13               367             RRC     A
00000F CE               368             XCH     A,R6
000010 13               369             RRC     A
000011 D8F9             370             DJNZ    R0,?C0018
000013 B50048           371             CJNE    A,ECO_PAGE_PREV_PID+01H,?C0002
000016 EE               372             MOV     A,R6
000017 B50044           373             CJNE    A,ECO_PAGE_PREV_PID,?C0002
                        374     ;       {
                        375                             ; SOURCE LINE # 111
                        376     ;               //virtual address id + function offset
                        377     ;               ECO_PAGE_ADDR = (ECO_PAGE_PREV_VID << ECO_PAGE_SHIFT) + (ECO_PAGE_ADDR &
                                ECO_PAGE_MASK);
                        378                             ; SOURCE LINE # 113
00001A E500       F     379             MOV     A,ECO_PAGE_PREV_VID+01H
00001C AE00       F     380             MOV     R6,ECO_PAGE_PREV_VID
00001E 7806             381             MOV     R0,#06H
000020                  382     ?C0020:
000020 C3               383             CLR     C
000021 33               384             RLC     A
000022 CE               385             XCH     A,R6
000023 33               386             RLC     A
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     7

000024 CE               387             XCH     A,R6
000025 D8F9             388             DJNZ    R0,?C0020
000027 FF               389             MOV     R7,A
000028 7C00             390             MOV     R4,#00H
00002A E500       F     391             MOV     A,ECO_PAGE_ADDR+01H
00002C 543F             392             ANL     A,#03FH
00002E 2F               393             ADD     A,R7
00002F F500       F     394             MOV     ECO_PAGE_ADDR+01H,A
000031 EC               395             MOV     A,R4
000032 3E               396             ADDC    A,R6
000033 F500       F     397             MOV     ECO_PAGE_ADDR,A
                        398     ;               #pragma asm
000035 7800       F     399             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
000037 E6               400             MOV     A,@R0
000038 F9               401             MOV     R1,A
000039 7800       F     402             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
00003B E6               403             MOV     A,@R0
00003C FA               404             MOV     R2,A
00003D 7800       F     405             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
00003F E6               406             MOV     A,@R0
000040 FB               407             MOV     R3,A
000041 7800       F     408             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
000043 E6               409             MOV     A,@R0
000044 FC               410             MOV     R4,A
000045 7800       F     411             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
000047 E6               412             MOV     A,@R0
000048 FD               413             MOV     R5,A
000049 7800       F     414             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
00004B E6               415             MOV     A,@R0
00004C FE               416             MOV     R6,A
00004D 7800       F     417             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
00004F E6               418             MOV     A,@R0
000050 FF               419             MOV     R7,A
000051 8500B3     F     420             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
000054 850083     F     421             MOV     DPH,ECO_PAGE_ADDR
000057 850082     F     422             MOV     DPL,ECO_PAGE_ADDR+01H
00005A 120000     E     423             LCALL   ?C?ICALL2
                        424     ;               //eco_page_function_call
                        425               
00005D 22               426             RET     
                        427     ;               #pragma endasm
                        428     ;               return ;
                        429     ;       }
                        430                             ; SOURCE LINE # 118
00005E                  431     ?C0002:
                        432     ; 
                        433     ;       //Check Table   
                        434     ;       for(i=0;i<ECO_PAGE_ENTRY;i++)
                        435                             ; SOURCE LINE # 121
00005E E4               436             CLR     A
00005F F500       F     437             MOV     i?142,A
000061 F500       F     438             MOV     i?142+01H,A
000063                  439     ?C0004:
                        440     ;       {   
                        441                             ; SOURCE LINE # 122
                        442     ;               if((ECO_PAGE_ADDR >> ECO_PAGE_SHIFT) == (ECO_PAGE_TABLE[i] & 0x7FFF))
                        443                             ; SOURCE LINE # 123
000063 AD00       F     444             MOV     R5,i?142+01H
000065 ED               445             MOV     A,R5
000066 25E0             446             ADD     A,ACC
000068 2400       F     447             ADD     A,#LOW (ECO_PAGE_TABLE)
00006A F8               448             MOV     R0,A
00006B E6               449             MOV     A,@R0
00006C 547F             450             ANL     A,#07FH
00006E FA               451             MOV     R2,A
00006F 08               452             INC     R0
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     8

000070 E6               453             MOV     A,@R0
000071 FB               454             MOV     R3,A
000072 E500       F     455             MOV     A,ECO_PAGE_ADDR+01H
000074 AE00       F     456             MOV     R6,ECO_PAGE_ADDR
000076 7806             457             MOV     R0,#06H
000078                  458     ?C0021:
000078 CE               459             XCH     A,R6
000079 C3               460             CLR     C
00007A 13               461             RRC     A
00007B CE               462             XCH     A,R6
00007C 13               463             RRC     A
00007D D8F9             464             DJNZ    R0,?C0021
00007F B50319           465             CJNE    A,AR3,?C0006
000082 EE               466             MOV     A,R6
000083 B50215           467             CJNE    A,AR2,?C0006
                        468     ;               {
                        469                             ; SOURCE LINE # 124
                        470     ;                       page_index = i;
                        471                             ; SOURCE LINE # 125
000086 850000     F     472             MOV     page_index?143,i?142
000089 850000     F     473             MOV     page_index?143+01H,i?142+01H
                        474     ; 
                        475     ;                       //set LRU bit is 1
                        476     ;                       ECO_PAGE_TABLE[i] = ECO_PAGE_TABLE[i] | 0x8000;
                        477                             ; SOURCE LINE # 128
00008C ED               478             MOV     A,R5
00008D 25E0             479             ADD     A,ACC
00008F 2400       F     480             ADD     A,#LOW (ECO_PAGE_TABLE)
000091 F8               481             MOV     R0,A
000092 7480             482             MOV     A,#080H
000094 46               483             ORL     A,@R0
000095 F6               484             MOV     @R0,A
000096 08               485             INC     R0
000097 E6               486             MOV     A,@R0
000098 F6               487             MOV     @R0,A
                        488     ;                       break;
                        489                             ; SOURCE LINE # 129
000099 800E             490             SJMP    ?C0005
                        491     ;               }
                        492                             ; SOURCE LINE # 130
                        493     ;       }
                        494                             ; SOURCE LINE # 131
00009B                  495     ?C0006:
00009B 0500       F     496             INC     i?142+01H
00009D E500       F     497             MOV     A,i?142+01H
00009F 7002             498             JNZ     ?C0023
0000A1 0500       F     499             INC     i?142
0000A3                  500     ?C0023:
0000A3 6403             501             XRL     A,#03H
0000A5 4500       F     502             ORL     A,i?142
0000A7 70BA             503             JNZ     ?C0004
0000A9                  504     ?C0005:
                        505     ; 
                        506     ;       if(page_index != -1)
                        507                             ; SOURCE LINE # 133
0000A9 E500       F     508             MOV     A,page_index?143+01H
0000AB F4               509             CPL     A
0000AC 7003             510             JNZ     ?C0024
0000AE E500       F     511             MOV     A,page_index?143
0000B0 F4               512             CPL     A
0000B1                  513     ?C0024:
0000B1 606C             514             JZ      ?C0008
                        515     ;       {
                        516                             ; SOURCE LINE # 134
                        517     ;               //store function physical addres id 
                        518     ;               ECO_PAGE_PREV_PID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE     9

                        519                             ; SOURCE LINE # 136
0000B3 E500       F     520             MOV     A,ECO_PAGE_ADDR+01H
0000B5 AE00       F     521             MOV     R6,ECO_PAGE_ADDR
0000B7 7806             522             MOV     R0,#06H
0000B9                  523     ?C0025:
0000B9 CE               524             XCH     A,R6
0000BA C3               525             CLR     C
0000BB 13               526             RRC     A
0000BC CE               527             XCH     A,R6
0000BD 13               528             RRC     A
0000BE D8F9             529             DJNZ    R0,?C0025
0000C0 F500       F     530             MOV     ECO_PAGE_PREV_PID+01H,A
0000C2 8E00       F     531             MOV     ECO_PAGE_PREV_PID,R6
                        532     ;       
                        533     ;               //memory page is in ram
                        534     ;               ECO_PAGE_ADDR = ((page_index + ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_SHIFT) 
                               + (ECO_PAGE_ADDR & ECO_PAGE_MASK);
                        535                             ; SOURCE LINE # 139
0000C4 E500       F     536             MOV     A,page_index?143+01H
0000C6 243D             537             ADD     A,#03DH
0000C8 FF               538             MOV     R7,A
0000C9 E4               539             CLR     A
0000CA 3500       F     540             ADDC    A,page_index?143
0000CC FE               541             MOV     R6,A
0000CD EF               542             MOV     A,R7
0000CE 7806             543             MOV     R0,#06H
0000D0                  544     ?C0026:
0000D0 C3               545             CLR     C
0000D1 33               546             RLC     A
0000D2 CE               547             XCH     A,R6
0000D3 33               548             RLC     A
0000D4 CE               549             XCH     A,R6
0000D5 D8F9             550             DJNZ    R0,?C0026
0000D7 FF               551             MOV     R7,A
0000D8 7C00             552             MOV     R4,#00H
0000DA E500       F     553             MOV     A,ECO_PAGE_ADDR+01H
0000DC 543F             554             ANL     A,#03FH
0000DE 2F               555             ADD     A,R7
0000DF F500       F     556             MOV     ECO_PAGE_ADDR+01H,A
0000E1 EC               557             MOV     A,R4
0000E2 3E               558             ADDC    A,R6
0000E3 F500       F     559             MOV     ECO_PAGE_ADDR,A
                        560     ; 
                        561     ;               //cache the virtual address id
                        562     ;               ECO_PAGE_PREV_VID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
                        563                             ; SOURCE LINE # 142
0000E5 E500       F     564             MOV     A,ECO_PAGE_ADDR+01H
0000E7 AE00       F     565             MOV     R6,ECO_PAGE_ADDR
0000E9 7806             566             MOV     R0,#06H
0000EB                  567     ?C0027:
0000EB CE               568             XCH     A,R6
0000EC C3               569             CLR     C
0000ED 13               570             RRC     A
0000EE CE               571             XCH     A,R6
0000EF 13               572             RRC     A
0000F0 D8F9             573             DJNZ    R0,?C0027
0000F2 F500       F     574             MOV     ECO_PAGE_PREV_VID+01H,A
0000F4 8E00       F     575             MOV     ECO_PAGE_PREV_VID,R6
                        576     ; 
                        577     ; 
                        578     ;               
                        579     ;               #pragma asm
0000F6 7800       F     580             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
0000F8 E6               581             MOV     A,@R0
0000F9 F9               582             MOV     R1,A
0000FA 7800       F     583             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    10

0000FC E6               584             MOV     A,@R0
0000FD FA               585             MOV     R2,A
0000FE 7800       F     586             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
000100 E6               587             MOV     A,@R0
000101 FB               588             MOV     R3,A
000102 7800       F     589             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
000104 E6               590             MOV     A,@R0
000105 FC               591             MOV     R4,A
000106 7800       F     592             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
000108 E6               593             MOV     A,@R0
000109 FD               594             MOV     R5,A
00010A 7800       F     595             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
00010C E6               596             MOV     A,@R0
00010D FE               597             MOV     R6,A
00010E 7800       F     598             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
000110 E6               599             MOV     A,@R0
000111 FF               600             MOV     R7,A
000112 8500B3     F     601             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
000115 850083     F     602             MOV     DPH,ECO_PAGE_ADDR
000118 850082     F     603             MOV     DPL,ECO_PAGE_ADDR+01H
00011B 120000     E     604             LCALL   ?C?ICALL2
                        605     ;               //eco_page_function_call
                        606               
                        607     ;               //MOV     DPH,ECO_PAGE_ADDR
                        608               
                        609     ;               //MOV     DPL,ECO_PAGE_ADDR+01H
                        610               
                        611     ;               //LCALL ?C?ICALL2
                        612               
00011E 22               613             RET     
                        614     ;               #pragma endasm
                        615     ; 
                        616     ;               return ;
                        617     ;       }       
                        618                             ; SOURCE LINE # 154
00011F                  619     ?C0008:
                        620     ;       else
                        621     ;       {
                        622                             ; SOURCE LINE # 156
                        623     ;               //page fault
                        624     ;               for(i=(ECO_PAGE_TABLE_INDEX+1)%ECO_PAGE_ENTRY; ;i=(i+1)%ECO_PAGE_ENTRY)
                        625                             ; SOURCE LINE # 158
00011F E500       F     626             MOV     A,ECO_PAGE_TABLE_INDEX
000121 2401             627             ADD     A,#01H
000123 FF               628             MOV     R7,A
000124 E4               629             CLR     A
000125 33               630             RLC     A
000126 020000     F     631             LJMP    ?C0033
000129                  632     ?C0010:
                        633     ;               {
                        634                             ; SOURCE LINE # 159
                        635     ;                       if((ECO_PAGE_TABLE[i] & 0x8000) == 0x8000)
                        636                             ; SOURCE LINE # 160
000129 AF00       F     637             MOV     R7,i?142+01H
00012B EF               638             MOV     A,R7
00012C 25E0             639             ADD     A,ACC
00012E 2400       F     640             ADD     A,#LOW (ECO_PAGE_TABLE)
000130 F8               641             MOV     R0,A
000131 E6               642             MOV     A,@R0
000132 30E70D           643             JNB     ACC.7,?C0013
                        644     ;                       {
                        645                             ; SOURCE LINE # 161
                        646     ;                               //LRU bit is 1 and then set this bit is 0
                        647     ;                               ECO_PAGE_TABLE[i] = ECO_PAGE_TABLE[i] & 0x7FFF;
                        648                             ; SOURCE LINE # 163
000135 EF               649             MOV     A,R7
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    11

000136 25E0             650             ADD     A,ACC
000138 2400       F     651             ADD     A,#LOW (ECO_PAGE_TABLE)
00013A F8               652             MOV     R0,A
00013B 747F             653             MOV     A,#07FH
00013D 56               654             ANL     A,@R0
00013E F6               655             MOV     @R0,A
                        656     ;                       }
                        657                             ; SOURCE LINE # 164
00013F 020000     F     658             LJMP    ?C0012
000142                  659     ?C0013:
                        660     ;                       else
                        661     ;                       {
                        662                             ; SOURCE LINE # 166
                        663     ;                               unsigned char xdata *seg = (unsigned char xdata *)((i + 
                               ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_SHIFT);
                        664                             ; SOURCE LINE # 167
000142 E500       F     665             MOV     A,i?142+01H
000144 243D             666             ADD     A,#03DH
000146 FF               667             MOV     R7,A
000147 E4               668             CLR     A
000148 3500       F     669             ADDC    A,i?142
00014A FE               670             MOV     R6,A
00014B EF               671             MOV     A,R7
00014C 7806             672             MOV     R0,#06H
00014E                  673     ?C0028:
00014E C3               674             CLR     C
00014F 33               675             RLC     A
000150 CE               676             XCH     A,R6
000151 33               677             RLC     A
000152 CE               678             XCH     A,R6
000153 D8F9             679             DJNZ    R0,?C0028
000155 8E00       F     680             MOV     seg?140,R6
000157 F500       F     681             MOV     seg?140+01H,A
                        682     ;                               unsigned int j;
                        683     ;                               
                        684     ;                               //memory page is in ram
                        685     ;                               eeprom_init();
                        686                             ; SOURCE LINE # 171
000159 120000     E     687             LCALL   eeprom_init
                        688     ; 
                        689     ;                               //mov code from eeprom to external ram
                        690     ;                               for(j=0;j<ECO_PAGE_SIZE;j++)
                        691                             ; SOURCE LINE # 174
00015C E4               692             CLR     A
00015D F500       F     693             MOV     j?141,A
00015F F500       F     694             MOV     j?141+01H,A
000161                  695     ?C0015:
                        696     ;                               {
                        697                             ; SOURCE LINE # 175
                        698     ;                                       *(seg+j) = eeprom_read(ECO_ADDR_SHIFT(ECO_PAGE_A
                               DDR & ECO_PAGE_MOV_MASK ) +j);
                        699                             ; SOURCE LINE # 176
000161 E500       F     700             MOV     A,ECO_PAGE_ADDR+01H
000163 54C0             701             ANL     A,#0C0H
000165 2403             702             ADD     A,#03H
000167 FF               703             MOV     R7,A
000168 E4               704             CLR     A
000169 3500       F     705             ADDC    A,ECO_PAGE_ADDR
00016B CF               706             XCH     A,R7
00016C 2500       F     707             ADD     A,j?141+01H
00016E CF               708             XCH     A,R7
00016F 3500       F     709             ADDC    A,j?141
000171 FE               710             MOV     R6,A
000172 120000     E     711             LCALL   _eeprom_read
000175 E500       F     712             MOV     A,seg?140+01H
000177 2500       F     713             ADD     A,j?141+01H
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    12

000179 F582             714             MOV     DPL,A
00017B E500       F     715             MOV     A,seg?140
00017D 3500       F     716             ADDC    A,j?141
00017F F583             717             MOV     DPH,A
000181 EF               718             MOV     A,R7
000182 F0               719             MOVX    @DPTR,A
                        720     ;                               }
                        721                             ; SOURCE LINE # 177
000183 0500       F     722             INC     j?141+01H
000185 E500       F     723             MOV     A,j?141+01H
000187 7002             724             JNZ     ?C0029
000189 0500       F     725             INC     j?141
00018B                  726     ?C0029:
00018B C3               727             CLR     C
00018C 9440             728             SUBB    A,#040H
00018E E500       F     729             MOV     A,j?141
000190 9400             730             SUBB    A,#00H
000192 40CD             731             JC      ?C0015
000194                  732     ?C0016:
                        733     ;                               
                        734     ;                               //update page table to connect this physical address id 
                               with virtual address id 
                        735     ;                               ECO_PAGE_TABLE[i] = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
                        736                             ; SOURCE LINE # 180
000194 E500       F     737             MOV     A,ECO_PAGE_ADDR+01H
000196 AE00       F     738             MOV     R6,ECO_PAGE_ADDR
000198 7806             739             MOV     R0,#06H
00019A                  740     ?C0030:
00019A CE               741             XCH     A,R6
00019B C3               742             CLR     C
00019C 13               743             RRC     A
00019D CE               744             XCH     A,R6
00019E 13               745             RRC     A
00019F D8F9             746             DJNZ    R0,?C0030
0001A1 FF               747             MOV     R7,A
0001A2 AD00       F     748             MOV     R5,i?142+01H
0001A4 ED               749             MOV     A,R5
0001A5 25E0             750             ADD     A,ACC
0001A7 2400       F     751             ADD     A,#LOW (ECO_PAGE_TABLE)
0001A9 F8               752             MOV     R0,A
0001AA A606             753             MOV     @R0,AR6
0001AC 08               754             INC     R0
0001AD A607             755             MOV     @R0,AR7
                        756     ; 
                        757     ;                               //store physical address id
                        758     ;                               ECO_PAGE_PREV_PID = ECO_PAGE_TABLE[i];
                        759                             ; SOURCE LINE # 183
0001AF ED               760             MOV     A,R5
0001B0 25E0             761             ADD     A,ACC
0001B2 2400       F     762             ADD     A,#LOW (ECO_PAGE_TABLE)
0001B4 F8               763             MOV     R0,A
0001B5 E6               764             MOV     A,@R0
0001B6 F500       F     765             MOV     ECO_PAGE_PREV_PID,A
0001B8 08               766             INC     R0
0001B9 E6               767             MOV     A,@R0
0001BA F500       F     768             MOV     ECO_PAGE_PREV_PID+01H,A
                        769     ; 
                        770     ;                               //update page address e.g.  (page_id<<8) + page_offset
                        771     ;                               ECO_PAGE_ADDR = ((i + ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_
                               SHIFT) + (ECO_PAGE_ADDR & ECO_PAGE_MASK);
                        772                             ; SOURCE LINE # 186
0001BC E500       F     773             MOV     A,i?142+01H
0001BE 243D             774             ADD     A,#03DH
0001C0 FF               775             MOV     R7,A
0001C1 E4               776             CLR     A
0001C2 3500       F     777             ADDC    A,i?142
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    13

0001C4 FE               778             MOV     R6,A
0001C5 EF               779             MOV     A,R7
0001C6 7806             780             MOV     R0,#06H
0001C8                  781     ?C0031:
0001C8 C3               782             CLR     C
0001C9 33               783             RLC     A
0001CA CE               784             XCH     A,R6
0001CB 33               785             RLC     A
0001CC CE               786             XCH     A,R6
0001CD D8F9             787             DJNZ    R0,?C0031
0001CF FF               788             MOV     R7,A
0001D0 7C00             789             MOV     R4,#00H
0001D2 E500       F     790             MOV     A,ECO_PAGE_ADDR+01H
0001D4 543F             791             ANL     A,#03FH
0001D6 2F               792             ADD     A,R7
0001D7 F500       F     793             MOV     ECO_PAGE_ADDR+01H,A
0001D9 EC               794             MOV     A,R4
0001DA 3E               795             ADDC    A,R6
0001DB F500       F     796             MOV     ECO_PAGE_ADDR,A
                        797     ; 
                        798     ;                               //store virtual address id 
                        799     ;                               ECO_PAGE_PREV_VID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;    
                        800                             ; SOURCE LINE # 189
0001DD E500       F     801             MOV     A,ECO_PAGE_ADDR+01H
0001DF AE00       F     802             MOV     R6,ECO_PAGE_ADDR
0001E1 7806             803             MOV     R0,#06H
0001E3                  804     ?C0032:
0001E3 CE               805             XCH     A,R6
0001E4 C3               806             CLR     C
0001E5 13               807             RRC     A
0001E6 CE               808             XCH     A,R6
0001E7 13               809             RRC     A
0001E8 D8F9             810             DJNZ    R0,?C0032
0001EA F500       F     811             MOV     ECO_PAGE_PREV_VID+01H,A
0001EC 8E00       F     812             MOV     ECO_PAGE_PREV_VID,R6
                        813     ; 
                        814     ;                               //mov to the next index
                        815     ;                               ECO_PAGE_TABLE_INDEX = i;
                        816                             ; SOURCE LINE # 192
0001EE 850000     F     817             MOV     ECO_PAGE_TABLE_INDEX,i?142+01H
                        818     ; 
                        819     ;                               //jump  to function address
                        820     ;                               #pragma asm
0001F1 7800       F     821             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
0001F3 E6               822             MOV     A,@R0
0001F4 F9               823             MOV     R1,A
0001F5 7800       F     824             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
0001F7 E6               825             MOV     A,@R0
0001F8 FA               826             MOV     R2,A
0001F9 7800       F     827             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
0001FB E6               828             MOV     A,@R0
0001FC FB               829             MOV     R3,A
0001FD 7800       F     830             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
0001FF E6               831             MOV     A,@R0
000200 FC               832             MOV     R4,A
000201 7800       F     833             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
000203 E6               834             MOV     A,@R0
000204 FD               835             MOV     R5,A
000205 7800       F     836             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
000207 E6               837             MOV     A,@R0
000208 FE               838             MOV     R6,A
000209 7800       F     839             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
00020B E6               840             MOV     A,@R0
00020C FF               841             MOV     R7,A
00020D 8500B3     F     842             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
000210 850083     F     843             MOV     DPH,ECO_PAGE_ADDR
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    14

000213 850082     F     844             MOV     DPL,ECO_PAGE_ADDR+01H
000216 120000     E     845             LCALL   ?C?ICALL2
                        846     ;                               //eco_page_function_call
                        847               
                        848     ;                               //MOV     DPH,ECO_PAGE_ADDR
                        849               
                        850     ;                               //MOV     DPL,ECO_PAGE_ADDR+01H
                        851               
                        852     ;                               //LCALL        ?C?ICALL2               
                        853               
000219 22               854             RET     
                        855     ;                               #pragma endasm
                        856     ;                               
                        857     ;                               return ;
                        858     ;                               
                        859     ;                       }
                        860                             ; SOURCE LINE # 204
                        861     ;               }
                        862                             ; SOURCE LINE # 205
00021A                  863     ?C0012:
00021A E500       F     864             MOV     A,i?142+01H
00021C 2401             865             ADD     A,#01H
00021E FF               866             MOV     R7,A
00021F E4               867             CLR     A
000220 3500       F     868             ADDC    A,i?142
000222                  869     ?C0033:
000222 FE               870             MOV     R6,A
000223 7C00             871             MOV     R4,#00H
000225 7D03             872             MOV     R5,#03H
000227 120000     E     873             LCALL   ?C?UIDIV
00022A 8C00       F     874             MOV     i?142,R4
00022C 8D00       F     875             MOV     i?142+01H,R5
00022E 020000     F     876             LJMP    ?C0010
                        877     ; END OF eco_page_manager
                        878     
                        879             END
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    15

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                    T Y P E  V A L U E     ATTRIBUTES

?C0002. . . . . . . . . . . . . . . . .    C  ADDR  005EH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0004. . . . . . . . . . . . . . . . .    C  ADDR  0063H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0005. . . . . . . . . . . . . . . . .    C  ADDR  00A9H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0006. . . . . . . . . . . . . . . . .    C  ADDR  009BH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0008. . . . . . . . . . . . . . . . .    C  ADDR  011FH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0010. . . . . . . . . . . . . . . . .    C  ADDR  0129H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0012. . . . . . . . . . . . . . . . .    C  ADDR  021AH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0013. . . . . . . . . . . . . . . . .    C  ADDR  0142H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0015. . . . . . . . . . . . . . . . .    C  ADDR  0161H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0016. . . . . . . . . . . . . . . . .    C  ADDR  0194H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0018. . . . . . . . . . . . . . . . .    C  ADDR  000CH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0020. . . . . . . . . . . . . . . . .    C  ADDR  0020H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0021. . . . . . . . . . . . . . . . .    C  ADDR  0078H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0023. . . . . . . . . . . . . . . . .    C  ADDR  00A3H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0024. . . . . . . . . . . . . . . . .    C  ADDR  00B1H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0025. . . . . . . . . . . . . . . . .    C  ADDR  00B9H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0026. . . . . . . . . . . . . . . . .    C  ADDR  00D0H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0027. . . . . . . . . . . . . . . . .    C  ADDR  00EBH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0028. . . . . . . . . . . . . . . . .    C  ADDR  014EH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0029. . . . . . . . . . . . . . . . .    C  ADDR  018BH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0030. . . . . . . . . . . . . . . . .    C  ADDR  019AH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0031. . . . . . . . . . . . . . . . .    C  ADDR  01C8H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0032. . . . . . . . . . . . . . . . .    C  ADDR  01E3H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0033. . . . . . . . . . . . . . . . .    C  ADDR  0222H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C?ICALL2 . . . . . . . . . . . . . . .    C  ADDR  -------       EXT
?C?UIDIV. . . . . . . . . . . . . . . .    C  ADDR  -------       EXT
?DT?ECO_PAGE. . . . . . . . . . . . . .    D  SEG   000008H       REL=UNIT, ALN=BYTE
?DT?ECO_PAGE_MANAGER?ECO_PAGE . . . . .    D  SEG   000008H       REL=UNIT, ALN=BYTE
?ECO_PAGE_MANAGER?BYTE. . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
?ID?ECO_PAGE. . . . . . . . . . . . . .    I  SEG   00000DH       REL=UNIT, ALN=BYTE
?PR?ECO_PAGE_INIT?ECO_PAGE. . . . . . .    C  SEG   000010H       REL=UNIT, ALN=BYTE
?PR?ECO_PAGE_MANAGER?ECO_PAGE . . . . .    C  SEG   000231H       REL=UNIT, ALN=BYTE
_EEPROM_READ. . . . . . . . . . . . . .    C  ADDR  -------       EXT
AC. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.6   A   
ACC . . . . . . . . . . . . . . . . . .    D  ADDR  00E0H     A   
ADCCON. . . . . . . . . . . . . . . . .    D  ADDR  00A1H     A   
ADCDATAH. . . . . . . . . . . . . . . .    D  ADDR  00A2H     A   
ADCDATAL. . . . . . . . . . . . . . . .    D  ADDR  00A3H     A   
ADCSTATIC . . . . . . . . . . . . . . .    D  ADDR  00A4H     A   
AR2 . . . . . . . . . . . . . . . . . .    D  ADDR  0002H     A   
AR3 . . . . . . . . . . . . . . . . . .    D  ADDR  0003H     A   
AR6 . . . . . . . . . . . . . . . . . .    D  ADDR  0006H     A   
AR7 . . . . . . . . . . . . . . . . . .    D  ADDR  0007H     A   
B . . . . . . . . . . . . . . . . . . .    D  ADDR  00F0H     A   
C_T2. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.1   A   
CE. . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
CK_CTRL . . . . . . . . . . . . . . . .    D  ADDR  00B6H     A   
CKCON . . . . . . . . . . . . . . . . .    D  ADDR  008EH     A   
CLK1. . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.1   A   
CLK2. . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.5   A   
CP_RL2. . . . . . . . . . . . . . . . .    B  ADDR  00C8H.0   A   
CPRL2 . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.0   A   
CS. . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.3   A   
CT2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.1   A   
CY. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.7   A   
DATA? . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.0   A   
DEV_OFFSET. . . . . . . . . . . . . . .    D  ADDR  00BEH     A   
DIN0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.2   A   
DIO0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
DIO1. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.1   A   
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    16

DIO2. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.0   A   
DIO3. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
DIO4. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
DIO5. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
DIO6. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
DIO7. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
DIO8. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
DIO9. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
DOUT2 . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.4   A   
DPH . . . . . . . . . . . . . . . . . .    D  ADDR  0083H     A   
DPH0. . . . . . . . . . . . . . . . . .    D  ADDR  0083H     A   
DPH1. . . . . . . . . . . . . . . . . .    D  ADDR  0085H     A   
DPL . . . . . . . . . . . . . . . . . .    D  ADDR  0082H     A   
DPL0. . . . . . . . . . . . . . . . . .    D  ADDR  0082H     A   
DPL1. . . . . . . . . . . . . . . . . .    D  ADDR  0084H     A   
DPS . . . . . . . . . . . . . . . . . .    D  ADDR  0086H     A   
DR1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.2   A   
DR2 . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
DR2_CE. . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
EA. . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.7   A   
ECO_PAGE. . . . . . . . . . . . . . . .    -- ----  -------       
ECO_PAGE_ADDR . . . . . . . . . . . . .    D  ADDR  0005H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_INIT . . . . . . . . . . . . .    C  ADDR  0000H     R   SEG=?PR?ECO_PAGE_INIT?ECO_PAGE
ECO_PAGE_MANAGER. . . . . . . . . . . .    C  ADDR  0000H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
ECO_PAGE_PREV_PID . . . . . . . . . . .    D  ADDR  0001H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_PREV_VID . . . . . . . . . . .    D  ADDR  0003H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_REGISTER1. . . . . . . . . . .    I  ADDR  0006H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER2. . . . . . . . . . .    I  ADDR  0007H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER3. . . . . . . . . . .    I  ADDR  0008H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER4. . . . . . . . . . .    I  ADDR  0009H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER5. . . . . . . . . . .    I  ADDR  000AH     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER6. . . . . . . . . . .    I  ADDR  000BH     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER7. . . . . . . . . . .    I  ADDR  000CH     R   SEG=?ID?ECO_PAGE
ECO_PAGE_SPI_CONN . . . . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_TABLE. . . . . . . . . . . . .    I  ADDR  0000H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_TABLE_INDEX. . . . . . . . . .    D  ADDR  0007H     R   SEG=?DT?ECO_PAGE
EEPROM_INIT . . . . . . . . . . . . . .    C  ADDR  -------       EXT
EICON . . . . . . . . . . . . . . . . .    D  ADDR  00D8H     A   
EIE . . . . . . . . . . . . . . . . . .    D  ADDR  00E8H     A   
EIP . . . . . . . . . . . . . . . . . .    D  ADDR  00F8H     A   
ES. . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.4   A   
ET0 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.1   A   
ET1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.3   A   
ET2 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.5   A   
EWDI. . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.4   A   
EX0 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.0   A   
EX1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.2   A   
EX2 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.0   A   
EX3 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.1   A   
EX4 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.2   A   
EX5 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.3   A   
EXEN2 . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.3   A   
EXF2. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.6   A   
EXIF. . . . . . . . . . . . . . . . . .    D  ADDR  0091H     A   
F0. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.5   A   
F1. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.1   A   
I?142 . . . . . . . . . . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
IE. . . . . . . . . . . . . . . . . . .    D  ADDR  00A8H     A   
IE0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.1   A   
IE1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.3   A   
INT0_N. . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
INT1_N. . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
IP. . . . . . . . . . . . . . . . . . .    D  ADDR  00B8H     A   
IT0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.0   A   
IT1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.2   A   
J?141 . . . . . . . . . . . . . . . . .    D  ADDR  0006H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    17

MPAGE . . . . . . . . . . . . . . . . .    D  ADDR  0092H     A   
OV. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.2   A   
P . . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.0   A   
P0. . . . . . . . . . . . . . . . . . .    D  ADDR  0080H     A   
P0_0. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.0   A   
P0_1. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
P0_2. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
P0_3. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
P0_4. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
P0_5. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
P0_6. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
P0_7. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
P0_ALT. . . . . . . . . . . . . . . . .    D  ADDR  0095H     A   
P0_DIR. . . . . . . . . . . . . . . . .    D  ADDR  0094H     A   
P1. . . . . . . . . . . . . . . . . . .    D  ADDR  0090H     A   
P1_0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
P1_1. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.1   A   
P1_2. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.2   A   
P1_ALT. . . . . . . . . . . . . . . . .    D  ADDR  0097H     A   
P1_DIR. . . . . . . . . . . . . . . . .    D  ADDR  0096H     A   
PAGE_INDEX?143. . . . . . . . . . . . .    D  ADDR  0002H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
PCON. . . . . . . . . . . . . . . . . .    D  ADDR  0087H     A   
PS. . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.4   A   
PSW . . . . . . . . . . . . . . . . . .    D  ADDR  00D0H     A   
PT0 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.1   A   
PT1 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.3   A   
PT2 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.5   A   
PWDI. . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.4   A   
PWM . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
PWMCON. . . . . . . . . . . . . . . . .    D  ADDR  00A9H     A   
PWMDUTY . . . . . . . . . . . . . . . .    D  ADDR  00AAH     A   
PWR_UP. . . . . . . . . . . . . . . . .    B  ADDR  00A0H.7   A   
PX0 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.0   A   
PX1 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.2   A   
PX2 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.0   A   
PX3 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.1   A   
PX4 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.2   A   
PX5 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.3   A   
RADIO . . . . . . . . . . . . . . . . .    D  ADDR  00A0H     A   
RB8 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.2   A   
RCAP2H. . . . . . . . . . . . . . . . .    D  ADDR  00CBH     A   
RCAP2L. . . . . . . . . . . . . . . . .    D  ADDR  00CAH     A   
RCLK. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.5   A   
REGX_CTRL . . . . . . . . . . . . . . .    D  ADDR  00ADH     A   
REGX_LSB. . . . . . . . . . . . . . . .    D  ADDR  00ACH     A   
REGX_MSB. . . . . . . . . . . . . . . .    D  ADDR  00ABH     A   
REN . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.4   A   
RI. . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.0   A   
RS0 . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.3   A   
RS1 . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.4   A   
RSTREAS . . . . . . . . . . . . . . . .    D  ADDR  00B1H     A   
RXD . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
SBUF. . . . . . . . . . . . . . . . . .    D  ADDR  0099H     A   
SCON. . . . . . . . . . . . . . . . . .    D  ADDR  0098H     A   
SEG?140 . . . . . . . . . . . . . . . .    D  ADDR  0004H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
SM0 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.7   A   
SM1 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.6   A   
SM2 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.5   A   
SP. . . . . . . . . . . . . . . . . . .    D  ADDR  0081H     A   
SPC_FNC . . . . . . . . . . . . . . . .    D  ADDR  008FH     A   
SPI_CTRL. . . . . . . . . . . . . . . .    D  ADDR  00B3H     A   
SPI_DATA. . . . . . . . . . . . . . . .    D  ADDR  00B2H     A   
SPICLK. . . . . . . . . . . . . . . . .    D  ADDR  00B4H     A   
T0. . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
T1. . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
T1_1V2. . . . . . . . . . . . . . . . .    D  ADDR  00BCH     A   
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 20:27:31 PAGE    18

T2. . . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
T2_1V2. . . . . . . . . . . . . . . . .    D  ADDR  00BDH     A   
T2CON . . . . . . . . . . . . . . . . .    D  ADDR  00C8H     A   
TB8 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.3   A   
TCLK. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.4   A   
TCON. . . . . . . . . . . . . . . . . .    D  ADDR  0088H     A   
TEST_MODE . . . . . . . . . . . . . . .    D  ADDR  00B7H     A   
TF0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.5   A   
TF1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.7   A   
TF2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.7   A   
TH0 . . . . . . . . . . . . . . . . . .    D  ADDR  008CH     A   
TH1 . . . . . . . . . . . . . . . . . .    D  ADDR  008DH     A   
TH2 . . . . . . . . . . . . . . . . . .    D  ADDR  00CDH     A   
TI. . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.1   A   
TICK_DV . . . . . . . . . . . . . . . .    D  ADDR  00B5H     A   
TL0 . . . . . . . . . . . . . . . . . .    D  ADDR  008AH     A   
TL1 . . . . . . . . . . . . . . . . . .    D  ADDR  008BH     A   
TL2 . . . . . . . . . . . . . . . . . .    D  ADDR  00CCH     A   
TMOD. . . . . . . . . . . . . . . . . .    D  ADDR  0089H     A   
TR0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.4   A   
TR1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.6   A   
TR2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.2   A   
TXD . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
WDTI. . . . . . . . . . . . . . . . . .    B  ADDR  00D8H.3   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S).
