AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     1


MACRO ASSEMBLER AX51 V3.06a
OBJECT MODULE PLACED IN .\main.obj
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\AX51.exe .\main.src EP DEBUG SYMBOLS OJ(.\main.obj) PR(.\main.ls1) 

LOC    OBJ             LINE     SOURCE

                          1     ; ./main.src generated from: .\main.c
                          2     ; COMPILER INVOKED BY:
                          3     ;        C:\Keil\C51\BIN\C51.exe .\main.c BROWSE DEBUG CODE LISTINCLUDE SYMBOLS PREPRINT
                                ROM(LARGE) INCDIR(../../Include) SRC(./main.src)
                          4     
                          5     $nomod51 
                          6     
                          7     NAME    MAIN
                          8     
 00A0.7                   9     PWR_UP  BIT     0A0H.7
 0080                    10     P0      DATA    080H
 0090                    11     P1      DATA    090H
 00D0.6                  12     AC      BIT     0D0H.6
 0080.5                  13     T0      BIT     080H.5
 00B3                    14     SPI_CTRL        DATA    0B3H
 0080.6                  15     T1      BIT     080H.6
 00A8.7                  16     EA      BIT     0A8H.7
 0090.0                  17     T2      BIT     090H.0
 00A0.6                  18     CE      BIT     0A0H.6
 00BE                    19     DEV_OFFSET      DATA    0BEH
 00A0.1                  20     CLK1    BIT     0A0H.1
 0090.2                  21     DIN0    BIT     090H.2
 00A0.5                  22     CLK2    BIT     0A0H.5
 0090.0                  23     DIO0    BIT     090H.0
 0083                    24     DPH0    DATA    083H
 0090.1                  25     DIO1    BIT     090H.1
 00A8                    26     IE      DATA    0A8H
 0085                    27     DPH1    DATA    085H
 0080.0                  28     DIO2    BIT     080H.0
 0080.1                  29     DIO3    BIT     080H.1
 0080.0                  30     P0_0    BIT     080H.0
 0090.0                  31     P1_0    BIT     090H.0
 0080.2                  32     DIO4    BIT     080H.2
 0080.1                  33     P0_1    BIT     080H.1
 0082                    34     DPL0    DATA    082H
 0090.1                  35     P1_1    BIT     090H.1
 0080.3                  36     DIO5    BIT     080H.3
 0080.2                  37     P0_2    BIT     080H.2
 0084                    38     DPL1    DATA    084H
 0090.2                  39     P1_2    BIT     090H.2
 0080.4                  40     DIO6    BIT     080H.4
 0080.3                  41     P0_3    BIT     080H.3
 0080.5                  42     DIO7    BIT     080H.5
 0080.4                  43     P0_4    BIT     080H.4
 00A4                    44     ADCSTATIC       DATA    0A4H
 0080.6                  45     DIO8    BIT     080H.6
 0080.5                  46     P0_5    BIT     080H.5
 00C8.6                  47     EXF2    BIT     0C8H.6
 00A0.3                  48     CS      BIT     0A0H.3
 0080.7                  49     DIO9    BIT     080H.7
 0080.6                  50     P0_6    BIT     080H.6
 0080.7                  51     P0_7    BIT     080H.7
 00A8.4                  52     ES      BIT     0A8H.4
 00B8                    53     IP      DATA    0B8H
 00A0.0                  54     DATA?   BIT     0A0H.0
 0098.0                  55     RI      BIT     098H.0
 00D0.7                  56     CY      BIT     0D0H.7
 0098.1                  57     TI      BIT     098H.1
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     2

 00BC                    58     T1_1V2  DATA    0BCH
 008F                    59     SPC_FNC DATA    08FH
 00BD                    60     T2_1V2  DATA    0BDH
 00CB                    61     RCAP2H  DATA    0CBH
 00B8.4                  62     PS      BIT     0B8H.4
 0081                    63     SP      DATA    081H
 00D0.2                  64     OV      BIT     0D0H.2
 00B6                    65     CK_CTRL DATA    0B6H
 00CA                    66     RCAP2L  DATA    0CAH
 00B5                    67     TICK_DV DATA    0B5H
 00B1                    68     RSTREAS DATA    0B1H
 00C8.1                  69     C_T2    BIT     0C8H.1
 00E8.4                  70     EWDI    BIT     0E8H.4
 00A1                    71     ADCCON  DATA    0A1H
 00C8.5                  72     RCLK    BIT     0C8H.5
 00A2                    73     ADCDATAH        DATA    0A2H
 0091                    74     EXIF    DATA    091H
 00C8.4                  75     TCLK    BIT     0C8H.4
 00A0.6                  76     DR2_CE  BIT     0A0H.6
 00A3                    77     ADCDATAL        DATA    0A3H
 0099                    78     SBUF    DATA    099H
 0087                    79     PCON    DATA    087H
 0098                    80     SCON    DATA    098H
 00F8.4                  81     PWDI    BIT     0F8H.4
 0089                    82     TMOD    DATA    089H
 0088                    83     TCON    DATA    088H
 00D8.3                  84     WDTI    BIT     0D8H.3
 00AA                    85     PWMDUTY DATA    0AAH
 0088.1                  86     IE0     BIT     088H.1
 0088.3                  87     IE1     BIT     088H.3
 0094                    88     P0_DIR  DATA    094H
 00F0                    89     B       DATA    0F0H
 0096                    90     P1_DIR  DATA    096H
 0095                    91     P0_ALT  DATA    095H
 0097                    92     P1_ALT  DATA    097H
 00C8.0                  93     CP_RL2  BIT     0C8H.0
 00A0.2                  94     DR1     BIT     0A0H.2
 00E0                    95     ACC     DATA    0E0H
 00A0.6                  96     DR2     BIT     0A0H.6
 00B7                    97     TEST_MODE       DATA    0B7H
 00B4                    98     SPICLK  DATA    0B4H
 00C8.1                  99     CT2     BIT     0C8H.1
 00A8.1                 100     ET0     BIT     0A8H.1
 00A8.3                 101     ET1     BIT     0A8H.3
 0088.5                 102     TF0     BIT     088H.5
 0080.3                 103     INT0_N  BIT     080H.3
 00A8.5                 104     ET2     BIT     0A8H.5
 0088.7                 105     TF1     BIT     088H.7
 0080.4                 106     INT1_N  BIT     080H.4
 00C8.7                 107     TF2     BIT     0C8H.7
 0098.2                 108     RB8     BIT     098H.2
 008C                   109     TH0     DATA    08CH
 00A8.0                 110     EX0     BIT     0A8H.0
 0088.0                 111     IT0     BIT     088H.0
 008D                   112     TH1     DATA    08DH
 00A8.2                 113     EX1     BIT     0A8H.2
 0098.3                 114     TB8     BIT     098H.3
 0088.2                 115     IT1     BIT     088H.2
 00CD                   116     TH2     DATA    0CDH
 00AD                   117     REGX_CTRL       DATA    0ADH
 00E8.0                 118     EX2     BIT     0E8H.0
 00D0.0                 119     P       BIT     0D0H.0
 00E8.1                 120     EX3     BIT     0E8H.1
 0098.7                 121     SM0     BIT     098H.7
 008A                   122     TL0     DATA    08AH
 00E8.2                 123     EX4     BIT     0E8H.2
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     3

 0098.6                 124     SM1     BIT     098H.6
 008B                   125     TL1     DATA    08BH
 00E8.3                 126     EX5     BIT     0E8H.3
 0098.5                 127     SM2     BIT     098H.5
 00CC                   128     TL2     DATA    0CCH
 00E8                   129     EIE     DATA    0E8H
 00B8.1                 130     PT0     BIT     0B8H.1
 00D0.3                 131     RS0     BIT     0D0H.3
 00B8.3                 132     PT1     BIT     0B8H.3
 00D0.4                 133     RS1     BIT     0D0H.4
 00B8.5                 134     PT2     BIT     0B8H.5
 0088.4                 135     TR0     BIT     088H.4
 00A9                   136     PWMCON  DATA    0A9H
 0088.6                 137     TR1     BIT     088H.6
 00C8.2                 138     TR2     BIT     0C8H.2
 00B8.0                 139     PX0     BIT     0B8H.0
 00B8.2                 140     PX1     BIT     0B8H.2
 00F8.0                 141     PX2     BIT     0F8H.0
 00F8.1                 142     PX3     BIT     0F8H.1
 00F8.2                 143     PX4     BIT     0F8H.2
 0083                   144     DPH     DATA    083H
 00F8.3                 145     PX5     BIT     0F8H.3
 00F8                   146     EIP     DATA    0F8H
 0082                   147     DPL     DATA    082H
 00C8.3                 148     EXEN2   BIT     0C8H.3
 00C8.0                 149     CPRL2   BIT     0C8H.0
 0098.4                 150     REN     BIT     098H.4
 00C8                   151     T2CON   DATA    0C8H
 0086                   152     DPS     DATA    086H
 00B2                   153     SPI_DATA        DATA    0B2H
 0092                   154     MPAGE   DATA    092H
 0080.1                 155     RXD     BIT     080H.1
 00A0.4                 156     DOUT2   BIT     0A0H.4
 00D8                   157     EICON   DATA    0D8H
 008E                   158     CKCON   DATA    08EH
 0080.2                 159     TXD     BIT     080H.2
 00A0                   160     RADIO   DATA    0A0H
 0080.7                 161     PWM     BIT     080H.7
 00D0.5                 162     F0      BIT     0D0H.5
 00D0.1                 163     F1      BIT     0D0H.1
 00AC                   164     REGX_LSB        DATA    0ACH
 00D0                   165     PSW     DATA    0D0H
 00AB                   166     REGX_MSB        DATA    0ABH
------                  167     ?PR?main?MAIN        SEGMENT CODE 
------                  168     ?DT?main?MAIN        SEGMENT DATA OVERLAYABLE 
------                  169     ?C_INITSEG           SEGMENT CODE 
------                  170     ?DT?MAIN             SEGMENT DATA 
------                  171     ?ID?MAIN             SEGMENT IDATA 
                        172             EXTRN   CODE (_mdelay)
                        173             EXTRN   CODE (_rf_configure)
                        174             EXTRN   CODE (_adc_read)
                        175             EXTRN   CODE (_adc_init)
                        176             EXTRN   CODE (eco_page_init)
                        177             EXTRN   CODE (_rf_send)
                        178             EXTRN   DATA (?_rf_send?BYTE)
                        179             EXTRN   CODE (_store_cpu_rate)
                        180             EXTRN   CODE (rf_init)
                        181             EXTRN   CODE (?C_STARTUP)
                        182             PUBLIC  rf_data
                        183             PUBLIC  dst_addr
                        184             PUBLIC  msg
                        185             PUBLIC  cfg
                        186             PUBLIC  main
                        187             EXTRN   CODE (eco_page_manager)
                        188         EXTRN   DATA (ECO_PAGE_ADDR)
                        189         EXTRN   DATA (ECO_PAGE_SPI_CONN)
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     4

                        190         EXTRN   IDATA (ECO_PAGE_REGISTER1)
                        191         EXTRN   IDATA (ECO_PAGE_REGISTER2)
                        192         EXTRN   IDATA (ECO_PAGE_REGISTER3)
                        193         EXTRN   IDATA (ECO_PAGE_REGISTER4)
                        194         EXTRN   IDATA (ECO_PAGE_REGISTER5)
                        195         EXTRN   IDATA (ECO_PAGE_REGISTER6)
                        196         EXTRN   IDATA (ECO_PAGE_REGISTER7)
                        197     
------                  198             RSEG  ?DT?main?MAIN
000000                  199     ?main?BYTE:
000002                  200             ORG  2
000002                  201           acc_x?040:   DS   2
000004                  202             ORG  4
000004                  203           acc_y?041:   DS   2
000006                  204             ORG  6
000006                  205           acc_z?042:   DS   2
000000                  206             ORG  0
000000                  207               i?043:   DS   2
                        208     
------                  209             RSEG  ?DT?MAIN
000000                  210                 cfg:   DS   3
000003                  211            dst_addr:   DS   3
000006                  212             rf_data:   DS   15
                        213     
------                  214             RSEG  ?ID?MAIN
000000                  215                 msg:   DS   20
                        216     
------                  217             RSEG  ?C_INITSEG
000000 0F               218             DB      00FH
000001 00         F     219             DB      rf_data
000002 00               220             DB      000H
000003 A0               221             DB      0A0H
000004 00               222             DB      000H
000005 00               223             DB      000H
000006 00               224             DB      000H
000007 00               225             DB      000H
000008 00               226             DB      000H
000009 F2               227             DB      0F2H
00000A F2               228             DB      0F2H
00000B F2               229             DB      0F2H
00000C F2               230             DB      0F2H
00000D F2               231             DB      0F2H
00000E 63               232             DB      063H
00000F 6F               233             DB      06FH
000010 EC               234             DB      0ECH
                        235     
000011 03               236             DB      003H
000012 00         F     237             DB      cfg
000013 00               238             DB      000H
000014 0000       F     239             DW      rf_data + 0
                        240     
000016 03               241             DB      003H
000017 00         F     242             DB      dst_addr
000018 F1               243             DB      0F1H
000019 F1               244             DB      0F1H
00001A F1               245             DB      0F1H
                        246     
                        247     ; #include "Eco/reg24e1.h"
                        248     ; #include "Eco/eco_sys.h"
                        249     ; #include "utils/utils.h"
                        250     ; #include "serial/serial.h"
                        251     ; #include "isr/isr_rf.h"
                        252     ; #include "eeprom/eeprom.h"
                        253     ; #include "eco_page.h"
                        254     ; #include "adc/adc.h"
                        255     ; 
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     5

                        256     ; 
                        257     ; //#include <math.h> /* for log */
                        258     ; 
                        259     ; 
                        260     ; 
                        261     ; struct rf_config rf_data = { {0x00}, /* data2 width */
                        262     ;       {0xA0}, /* data1 width */ 
                        263     ;       {0x00, 0x00, 0x00, 0x00, 0x00}, /* addr2 */
                        264     ;       {0xF2, 0xF2, 0xF2, 0xF2, 0xF2}, /* addr1, host addr */
                        265     ;       {0x63}, /* 24-bit address, 16-bit CRC */
                        266     ;       {0x6f, 0xEC} };
                        267     ; struct rf_config *cfg = &rf_data;
                        268     ; char dst_addr[3] = {0xF1, 0xF1, 0xF1};
                        269     ; char idata msg[20];
                        270     ; 
                        271     ; 
                        272     ; /*void blink2()
                        273     ; {
                        274     ;       int i;
                        275     ;       for(i=0;i<4;i++)
                        276     ;       {
                        277     ;               blink_led();
                        278     ;               mdelay(400);
                        279     ;       }
                        280     ;       mdelay(1000);
                        281     ; 
                        282     ; }
                        283     ; 
                        284     ; void blink4()
                        285     ; {
                        286     ;       int i;
                        287     ;       for(i=0;i<8;i++)
                        288     ;       {
                        289     ;               blink_led();
                        290     ;               mdelay(400);
                        291     ;       }       
                        292     ;       mdelay(1000);   
                        293     ; }
                        294     ; 
                        295     ; void blink6()
                        296     ; {
                        297     ;       int i;
                        298     ;       for(i=0;i<12;i++)
                        299     ;       {
                        300     ;               blink_led();
                        301     ;               mdelay(400);
                        302     ;       }       
                        303     ;       mdelay(1000);
                        304     ;       
                        305     ; }
                        306     ; */
                        307     ; 
                        308     ; int main()
                        309     
------                  310             RSEG  ?PR?main?MAIN
000000                  311     main:
                        312             USING   0
                        313                             ; SOURCE LINE # 62
                        314     ; {
                        315                             ; SOURCE LINE # 63
                        316     ;       unsigned int i = 0;
                        317                             ; SOURCE LINE # 64
000000 E4               318             CLR     A
000001 F500       F     319             MOV     i?043,A
000003 F500       F     320             MOV     i?043+01H,A
                        321     ;       store_cpu_rate(16);
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     6

                        322                             ; SOURCE LINE # 65
000005 7F10             323             MOV     R7,#010H
000007 FE               324             MOV     R6,A
000008 120000     E     325             LCALL   _store_cpu_rate
                        326     ;       P0_DIR &= ~0x20;
                        327                             ; SOURCE LINE # 66
00000B 5394DF           328             ANL     P0_DIR,#0DFH
                        329     ;       P0_ALT &= ~0x20;
                        330                             ; SOURCE LINE # 67
00000E 5395DF           331             ANL     P0_ALT,#0DFH
                        332     ; 
                        333     ;       adc_init(ADC_CLK_D8,ADC_RES_12,EXTREF);
                        334                             ; SOURCE LINE # 69
                        335             ;----------start----------
                        336             ;       MOV     R3,#010H
                        337     
000011 7800       E     338             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
000013 7610             339             MOV     @R0,#010H
                        340             ;----------end----------
                        341             ;----------start----------
                        342             ;       MOV     R5,#03H
                        343     
000015 7800       E     344             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
000017 7603             345             MOV     @R0,#03H
                        346             ;----------end----------
                        347             ;----------start----------
                        348             ;       MOV     R7,#020H
                        349     
000019 7800       E     350             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
00001B 7620             351             MOV     @R0,#020H
                        352             ;----------end----------
                        353             ;LCALL----------start----------
                        354     ;       LCALL   _adc_init
                        355     
00001D 85B300     E     356             MOV     ECO_PAGE_SPI_CONN,SPI_CTRL
000020 750000     E     357             MOV     ECO_PAGE_ADDR,#HIGH (_adc_init)
000023 750000     E     358             MOV     ECO_PAGE_ADDR+01H,#LOW (_adc_init)
000026 120000     E     359             LCALL   eco_page_manager
                        360             ;LCALL----------end----------
                        361     
                        362     ; 
                        363     ;       rf_init();
                        364                             ; SOURCE LINE # 71
000029 120000     E     365             LCALL   rf_init
                        366     ;       rf_configure(cfg);
                        367                             ; SOURCE LINE # 72
00002C AB00       F     368             MOV     R3,cfg
00002E AA00       F     369             MOV     R2,cfg+01H
000030 A900       F     370             MOV     R1,cfg+02H
000032 120000     E     371             LCALL   _rf_configure
                        372     ;       //serial_init(19200);   
                        373     ;       eco_page_init();
                        374                             ; SOURCE LINE # 74
000035 120000     E     375             LCALL   eco_page_init
                        376     ; 
                        377     ;       for(i=0;i<6;i++)
                        378                             ; SOURCE LINE # 76
000038 E4               379             CLR     A
000039 F500       F     380             MOV     i?043,A
00003B F500       F     381             MOV     i?043+01H,A
00003D                  382     ?C0001:
                        383     ;       {
                        384                             ; SOURCE LINE # 77
                        385     ;               blink_led();
                        386                             ; SOURCE LINE # 78
00003D 638020           387             XRL     P0,#020H
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     7

                        388     ;               mdelay(300);
                        389                             ; SOURCE LINE # 79
000040 7F2C             390             MOV     R7,#02CH
000042 7E01             391             MOV     R6,#01H
000044 120000     E     392             LCALL   _mdelay
                        393     ;       }
                        394                             ; SOURCE LINE # 80
000047 0500       F     395             INC     i?043+01H
000049 E500       F     396             MOV     A,i?043+01H
00004B 7002             397             JNZ     ?C0007
00004D 0500       F     398             INC     i?043
00004F                  399     ?C0007:
00004F C3               400             CLR     C
000050 9406             401             SUBB    A,#06H
000052 E500       F     402             MOV     A,i?043
000054 9400             403             SUBB    A,#00H
000056 40E5             404             JC      ?C0001
000058                  405     ?C0002:
                        406     ;       
                        407     ;       mdelay(1000);
                        408                             ; SOURCE LINE # 82
000058 7FE8             409             MOV     R7,#0E8H
00005A 7E03             410             MOV     R6,#03H
00005C 120000     E     411             LCALL   _mdelay
00005F                  412     ?C0004:
                        413     ; 
                        414     ;       while(1)
                        415                             ; SOURCE LINE # 84
                        416     ;       {
                        417                             ; SOURCE LINE # 85
                        418     ;               //blink4();
                        419     ;               int acc_x,acc_y,acc_z;
                        420     ;               acc_x = adc_read(X_AXIS);
                        421                             ; SOURCE LINE # 88
                        422             ;----------start----------
                        423             ;       MOV     R7,#03H
                        424     
00005F 7800       E     425             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
000061 7603             426             MOV     @R0,#03H
                        427             ;----------end----------
                        428             ;LCALL----------start----------
                        429     ;       LCALL   _adc_read
                        430     
000063 85B300     E     431             MOV     ECO_PAGE_SPI_CONN,SPI_CTRL
000066 750000     E     432             MOV     ECO_PAGE_ADDR,#HIGH (_adc_read)
000069 750000     E     433             MOV     ECO_PAGE_ADDR+01H,#LOW (_adc_read)
00006C 120000     E     434             LCALL   eco_page_manager
                        435             ;LCALL----------end----------
                        436     
00006F 8E00       F     437             MOV     acc_x?040,R6
000071 8F00       F     438             MOV     acc_x?040+01H,R7
                        439     ;               acc_y = adc_read(Y_AXIS);
                        440                             ; SOURCE LINE # 89
                        441             ;----------start----------
                        442             ;       MOV     R7,#04H
                        443     
000073 7800       E     444             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
000075 7604             445             MOV     @R0,#04H
                        446             ;----------end----------
                        447             ;LCALL----------start----------
                        448     ;       LCALL   _adc_read
                        449     
000077 85B300     E     450             MOV     ECO_PAGE_SPI_CONN,SPI_CTRL
00007A 750000     E     451             MOV     ECO_PAGE_ADDR,#HIGH (_adc_read)
00007D 750000     E     452             MOV     ECO_PAGE_ADDR+01H,#LOW (_adc_read)
000080 120000     E     453             LCALL   eco_page_manager
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     8

                        454             ;LCALL----------end----------
                        455     
000083 8E00       F     456             MOV     acc_y?041,R6
000085 8F00       F     457             MOV     acc_y?041+01H,R7
                        458     ;               acc_z = adc_read(Z_AXIS);
                        459                             ; SOURCE LINE # 90
                        460             ;----------start----------
                        461             ;       MOV     R7,#06H
                        462     
000087 7800       E     463             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
000089 7606             464             MOV     @R0,#06H
                        465             ;----------end----------
                        466             ;LCALL----------start----------
                        467     ;       LCALL   _adc_read
                        468     
00008B 85B300     E     469             MOV     ECO_PAGE_SPI_CONN,SPI_CTRL
00008E 750000     E     470             MOV     ECO_PAGE_ADDR,#HIGH (_adc_read)
000091 750000     E     471             MOV     ECO_PAGE_ADDR+01H,#LOW (_adc_read)
000094 120000     E     472             LCALL   eco_page_manager
                        473             ;LCALL----------end----------
                        474     
000097 8E00       F     475             MOV     acc_z?042,R6
000099 8F00       F     476             MOV     acc_z?042+01H,R7
                        477     ;               
                        478     ;               msg[0] = acc_x & 0x00FF;
                        479                             ; SOURCE LINE # 92
00009B E500       F     480             MOV     A,acc_x?040+01H
00009D 7800       F     481             MOV     R0,#LOW (msg)
00009F F6               482             MOV     @R0,A
                        483     ;               msg[1] = acc_x >> 8;
                        484                             ; SOURCE LINE # 93
0000A0 E500       F     485             MOV     A,acc_x?040
0000A2 FF               486             MOV     R7,A
0000A3 33               487             RLC     A
0000A4 95E0             488             SUBB    A,ACC
0000A6 08               489             INC     R0
0000A7 A607             490             MOV     @R0,AR7
                        491     ; 
                        492     ;               msg[2] = acc_y & 0x00FF;
                        493                             ; SOURCE LINE # 95
0000A9 E500       F     494             MOV     A,acc_y?041+01H
0000AB 08               495             INC     R0
0000AC F6               496             MOV     @R0,A
                        497     ;               msg[3] = acc_y >> 8;
                        498                             ; SOURCE LINE # 96
0000AD E500       F     499             MOV     A,acc_y?041
0000AF FF               500             MOV     R7,A
0000B0 33               501             RLC     A
0000B1 95E0             502             SUBB    A,ACC
0000B3 08               503             INC     R0
0000B4 A607             504             MOV     @R0,AR7
                        505     ;               
                        506     ;               msg[4] = acc_z & 0x00FF;
                        507                             ; SOURCE LINE # 98
0000B6 E500       F     508             MOV     A,acc_z?042+01H
0000B8 08               509             INC     R0
0000B9 F6               510             MOV     @R0,A
                        511     ;               msg[5] = acc_z >> 8;
                        512                             ; SOURCE LINE # 99
0000BA E500       F     513             MOV     A,acc_z?042
0000BC FF               514             MOV     R7,A
0000BD 33               515             RLC     A
0000BE 95E0             516             SUBB    A,ACC
0000C0 08               517             INC     R0
0000C1 A607             518             MOV     @R0,AR7
                        519     ;       
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE     9

                        520     ;               rf_send(dst_addr, 3, msg, 20);
                        521                             ; SOURCE LINE # 101
0000C3 750000     E     522             MOV     ?_rf_send?BYTE+04H,#00H
0000C6 750000     F     523             MOV     ?_rf_send?BYTE+05H,#HIGH (msg)
0000C9 750000     F     524             MOV     ?_rf_send?BYTE+06H,#LOW (msg)
0000CC 750014     E     525             MOV     ?_rf_send?BYTE+07H,#014H
                        526             ;----------start----------
                        527             ;       MOV     R3,#00H
                        528     
0000CF 7800       E     529             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
0000D1 7600             530             MOV     @R0,#00H
                        531             ;----------end----------
                        532             ;----------start----------
                        533             ;       MOV     R2,#HIGH (dst_addr)
                        534     
0000D3 7800       E     535             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
0000D5 7600       F     536             MOV     @R0,#HIGH (dst_addr)
                        537             ;----------end----------
                        538             ;----------start----------
                        539             ;       MOV     R1,#LOW (dst_addr)
                        540     
0000D7 7800       E     541             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
0000D9 7600       F     542             MOV     @R0,#LOW (dst_addr)
                        543             ;----------end----------
                        544             ;----------start----------
                        545             ;       MOV     R5,#03H
                        546     
0000DB 7800       E     547             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
0000DD 7603             548             MOV     @R0,#03H
                        549             ;----------end----------
                        550             ;LCALL----------start----------
                        551     ;       LCALL   _rf_send
                        552     
0000DF 85B300     E     553             MOV     ECO_PAGE_SPI_CONN,SPI_CTRL
0000E2 750000     E     554             MOV     ECO_PAGE_ADDR,#HIGH (_rf_send)
0000E5 750000     E     555             MOV     ECO_PAGE_ADDR+01H,#LOW (_rf_send)
0000E8 120000     E     556             LCALL   eco_page_manager
                        557             ;LCALL----------end----------
                        558     
                        559     ; 
                        560     ;               //blink2();
                        561     ;               mdelay(200);
                        562                             ; SOURCE LINE # 104
0000EB 7FC8             563             MOV     R7,#0C8H
0000ED 7E00             564             MOV     R6,#00H
0000EF 120000     E     565             LCALL   _mdelay
                        566     ;               blink_led();
                        567                             ; SOURCE LINE # 105
0000F2 638020           568             XRL     P0,#020H
                        569     ;               //mdelay(200);
                        570     ;       }
                        571                             ; SOURCE LINE # 107
0000F5 020000     F     572             LJMP    ?C0004
                        573     ; END OF main
                        574     
                        575             END
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE    10

SYMBOL TABLE LISTING
------ ----- -------


N A M E                        T Y P E  V A L U E     ATTRIBUTES

?_RF_SEND?BYTE. . . . . . . .  D  ADDR  -------       EXT
?C0001. . . . . . . . . . . .  C  ADDR  003DH     R   SEG=?PR?MAIN?MAIN
?C0002. . . . . . . . . . . .  C  ADDR  0058H     R   SEG=?PR?MAIN?MAIN
?C0004. . . . . . . . . . . .  C  ADDR  005FH     R   SEG=?PR?MAIN?MAIN
?C0007. . . . . . . . . . . .  C  ADDR  004FH     R   SEG=?PR?MAIN?MAIN
?C_INITSEG. . . . . . . . . .  C  SEG   00001BH       REL=UNIT, ALN=BYTE
?C_STARTUP. . . . . . . . . .  C  ADDR  -------       EXT
?DT?MAIN. . . . . . . . . . .  D  SEG   000015H       REL=UNIT, ALN=BYTE
?DT?MAIN?MAIN . . . . . . . .  D  SEG   000008H       REL=UNIT, ALN=BYTE
?ID?MAIN. . . . . . . . . . .  I  SEG   000014H       REL=UNIT, ALN=BYTE
?MAIN?BYTE. . . . . . . . . .  D  ADDR  0000H     R   SEG=?DT?MAIN?MAIN
?PR?MAIN?MAIN . . . . . . . .  C  SEG   0000F8H       REL=UNIT, ALN=BYTE
_ADC_INIT . . . . . . . . . .  C  ADDR  -------       EXT
_ADC_READ . . . . . . . . . .  C  ADDR  -------       EXT
_MDELAY . . . . . . . . . . .  C  ADDR  -------       EXT
_RF_CONFIGURE . . . . . . . .  C  ADDR  -------       EXT
_RF_SEND. . . . . . . . . . .  C  ADDR  -------       EXT
_STORE_CPU_RATE . . . . . . .  C  ADDR  -------       EXT
AC. . . . . . . . . . . . . .  B  ADDR  00D0H.6   A   
ACC . . . . . . . . . . . . .  D  ADDR  00E0H     A   
ACC_X?040 . . . . . . . . . .  D  ADDR  0002H     R   SEG=?DT?MAIN?MAIN
ACC_Y?041 . . . . . . . . . .  D  ADDR  0004H     R   SEG=?DT?MAIN?MAIN
ACC_Z?042 . . . . . . . . . .  D  ADDR  0006H     R   SEG=?DT?MAIN?MAIN
ADCCON. . . . . . . . . . . .  D  ADDR  00A1H     A   
ADCDATAH. . . . . . . . . . .  D  ADDR  00A2H     A   
ADCDATAL. . . . . . . . . . .  D  ADDR  00A3H     A   
ADCSTATIC . . . . . . . . . .  D  ADDR  00A4H     A   
AR7 . . . . . . . . . . . . .  D  ADDR  0007H     A   
B . . . . . . . . . . . . . .  D  ADDR  00F0H     A   
C_T2. . . . . . . . . . . . .  B  ADDR  00C8H.1   A   
CE. . . . . . . . . . . . . .  B  ADDR  00A0H.6   A   
CFG . . . . . . . . . . . . .  D  ADDR  0000H     R   SEG=?DT?MAIN
CK_CTRL . . . . . . . . . . .  D  ADDR  00B6H     A   
CKCON . . . . . . . . . . . .  D  ADDR  008EH     A   
CLK1. . . . . . . . . . . . .  B  ADDR  00A0H.1   A   
CLK2. . . . . . . . . . . . .  B  ADDR  00A0H.5   A   
CP_RL2. . . . . . . . . . . .  B  ADDR  00C8H.0   A   
CPRL2 . . . . . . . . . . . .  B  ADDR  00C8H.0   A   
CS. . . . . . . . . . . . . .  B  ADDR  00A0H.3   A   
CT2 . . . . . . . . . . . . .  B  ADDR  00C8H.1   A   
CY. . . . . . . . . . . . . .  B  ADDR  00D0H.7   A   
DATA? . . . . . . . . . . . .  B  ADDR  00A0H.0   A   
DEV_OFFSET. . . . . . . . . .  D  ADDR  00BEH     A   
DIN0. . . . . . . . . . . . .  B  ADDR  0090H.2   A   
DIO0. . . . . . . . . . . . .  B  ADDR  0090H.0   A   
DIO1. . . . . . . . . . . . .  B  ADDR  0090H.1   A   
DIO2. . . . . . . . . . . . .  B  ADDR  0080H.0   A   
DIO3. . . . . . . . . . . . .  B  ADDR  0080H.1   A   
DIO4. . . . . . . . . . . . .  B  ADDR  0080H.2   A   
DIO5. . . . . . . . . . . . .  B  ADDR  0080H.3   A   
DIO6. . . . . . . . . . . . .  B  ADDR  0080H.4   A   
DIO7. . . . . . . . . . . . .  B  ADDR  0080H.5   A   
DIO8. . . . . . . . . . . . .  B  ADDR  0080H.6   A   
DIO9. . . . . . . . . . . . .  B  ADDR  0080H.7   A   
DOUT2 . . . . . . . . . . . .  B  ADDR  00A0H.4   A   
DPH . . . . . . . . . . . . .  D  ADDR  0083H     A   
DPH0. . . . . . . . . . . . .  D  ADDR  0083H     A   
DPH1. . . . . . . . . . . . .  D  ADDR  0085H     A   
DPL . . . . . . . . . . . . .  D  ADDR  0082H     A   
DPL0. . . . . . . . . . . . .  D  ADDR  0082H     A   
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE    11

DPL1. . . . . . . . . . . . .  D  ADDR  0084H     A   
DPS . . . . . . . . . . . . .  D  ADDR  0086H     A   
DR1 . . . . . . . . . . . . .  B  ADDR  00A0H.2   A   
DR2 . . . . . . . . . . . . .  B  ADDR  00A0H.6   A   
DR2_CE. . . . . . . . . . . .  B  ADDR  00A0H.6   A   
DST_ADDR. . . . . . . . . . .  D  ADDR  0003H     R   SEG=?DT?MAIN
EA. . . . . . . . . . . . . .  B  ADDR  00A8H.7   A   
ECO_PAGE_ADDR . . . . . . . .  D  ADDR  -------       EXT
ECO_PAGE_INIT . . . . . . . .  C  ADDR  -------       EXT
ECO_PAGE_MANAGER. . . . . . .  C  ADDR  -------       EXT
ECO_PAGE_REGISTER1. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER2. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER3. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER4. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER5. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER6. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_REGISTER7. . . . . .  I  ADDR  -------       EXT
ECO_PAGE_SPI_CONN . . . . . .  D  ADDR  -------       EXT
EICON . . . . . . . . . . . .  D  ADDR  00D8H     A   
EIE . . . . . . . . . . . . .  D  ADDR  00E8H     A   
EIP . . . . . . . . . . . . .  D  ADDR  00F8H     A   
ES. . . . . . . . . . . . . .  B  ADDR  00A8H.4   A   
ET0 . . . . . . . . . . . . .  B  ADDR  00A8H.1   A   
ET1 . . . . . . . . . . . . .  B  ADDR  00A8H.3   A   
ET2 . . . . . . . . . . . . .  B  ADDR  00A8H.5   A   
EWDI. . . . . . . . . . . . .  B  ADDR  00E8H.4   A   
EX0 . . . . . . . . . . . . .  B  ADDR  00A8H.0   A   
EX1 . . . . . . . . . . . . .  B  ADDR  00A8H.2   A   
EX2 . . . . . . . . . . . . .  B  ADDR  00E8H.0   A   
EX3 . . . . . . . . . . . . .  B  ADDR  00E8H.1   A   
EX4 . . . . . . . . . . . . .  B  ADDR  00E8H.2   A   
EX5 . . . . . . . . . . . . .  B  ADDR  00E8H.3   A   
EXEN2 . . . . . . . . . . . .  B  ADDR  00C8H.3   A   
EXF2. . . . . . . . . . . . .  B  ADDR  00C8H.6   A   
EXIF. . . . . . . . . . . . .  D  ADDR  0091H     A   
F0. . . . . . . . . . . . . .  B  ADDR  00D0H.5   A   
F1. . . . . . . . . . . . . .  B  ADDR  00D0H.1   A   
I?043 . . . . . . . . . . . .  D  ADDR  0000H     R   SEG=?DT?MAIN?MAIN
IE. . . . . . . . . . . . . .  D  ADDR  00A8H     A   
IE0 . . . . . . . . . . . . .  B  ADDR  0088H.1   A   
IE1 . . . . . . . . . . . . .  B  ADDR  0088H.3   A   
INT0_N. . . . . . . . . . . .  B  ADDR  0080H.3   A   
INT1_N. . . . . . . . . . . .  B  ADDR  0080H.4   A   
IP. . . . . . . . . . . . . .  D  ADDR  00B8H     A   
IT0 . . . . . . . . . . . . .  B  ADDR  0088H.0   A   
IT1 . . . . . . . . . . . . .  B  ADDR  0088H.2   A   
MAIN. . . . . . . . . . . . .  C  ADDR  0000H     R   SEG=?PR?MAIN?MAIN
MPAGE . . . . . . . . . . . .  D  ADDR  0092H     A   
MSG . . . . . . . . . . . . .  I  ADDR  0000H     R   SEG=?ID?MAIN
OV. . . . . . . . . . . . . .  B  ADDR  00D0H.2   A   
P . . . . . . . . . . . . . .  B  ADDR  00D0H.0   A   
P0. . . . . . . . . . . . . .  D  ADDR  0080H     A   
P0_0. . . . . . . . . . . . .  B  ADDR  0080H.0   A   
P0_1. . . . . . . . . . . . .  B  ADDR  0080H.1   A   
P0_2. . . . . . . . . . . . .  B  ADDR  0080H.2   A   
P0_3. . . . . . . . . . . . .  B  ADDR  0080H.3   A   
P0_4. . . . . . . . . . . . .  B  ADDR  0080H.4   A   
P0_5. . . . . . . . . . . . .  B  ADDR  0080H.5   A   
P0_6. . . . . . . . . . . . .  B  ADDR  0080H.6   A   
P0_7. . . . . . . . . . . . .  B  ADDR  0080H.7   A   
P0_ALT. . . . . . . . . . . .  D  ADDR  0095H     A   
P0_DIR. . . . . . . . . . . .  D  ADDR  0094H     A   
P1. . . . . . . . . . . . . .  D  ADDR  0090H     A   
P1_0. . . . . . . . . . . . .  B  ADDR  0090H.0   A   
P1_1. . . . . . . . . . . . .  B  ADDR  0090H.1   A   
P1_2. . . . . . . . . . . . .  B  ADDR  0090H.2   A   
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE    12

P1_ALT. . . . . . . . . . . .  D  ADDR  0097H     A   
P1_DIR. . . . . . . . . . . .  D  ADDR  0096H     A   
PCON. . . . . . . . . . . . .  D  ADDR  0087H     A   
PS. . . . . . . . . . . . . .  B  ADDR  00B8H.4   A   
PSW . . . . . . . . . . . . .  D  ADDR  00D0H     A   
PT0 . . . . . . . . . . . . .  B  ADDR  00B8H.1   A   
PT1 . . . . . . . . . . . . .  B  ADDR  00B8H.3   A   
PT2 . . . . . . . . . . . . .  B  ADDR  00B8H.5   A   
PWDI. . . . . . . . . . . . .  B  ADDR  00F8H.4   A   
PWM . . . . . . . . . . . . .  B  ADDR  0080H.7   A   
PWMCON. . . . . . . . . . . .  D  ADDR  00A9H     A   
PWMDUTY . . . . . . . . . . .  D  ADDR  00AAH     A   
PWR_UP. . . . . . . . . . . .  B  ADDR  00A0H.7   A   
PX0 . . . . . . . . . . . . .  B  ADDR  00B8H.0   A   
PX1 . . . . . . . . . . . . .  B  ADDR  00B8H.2   A   
PX2 . . . . . . . . . . . . .  B  ADDR  00F8H.0   A   
PX3 . . . . . . . . . . . . .  B  ADDR  00F8H.1   A   
PX4 . . . . . . . . . . . . .  B  ADDR  00F8H.2   A   
PX5 . . . . . . . . . . . . .  B  ADDR  00F8H.3   A   
RADIO . . . . . . . . . . . .  D  ADDR  00A0H     A   
RB8 . . . . . . . . . . . . .  B  ADDR  0098H.2   A   
RCAP2H. . . . . . . . . . . .  D  ADDR  00CBH     A   
RCAP2L. . . . . . . . . . . .  D  ADDR  00CAH     A   
RCLK. . . . . . . . . . . . .  B  ADDR  00C8H.5   A   
REGX_CTRL . . . . . . . . . .  D  ADDR  00ADH     A   
REGX_LSB. . . . . . . . . . .  D  ADDR  00ACH     A   
REGX_MSB. . . . . . . . . . .  D  ADDR  00ABH     A   
REN . . . . . . . . . . . . .  B  ADDR  0098H.4   A   
RF_DATA . . . . . . . . . . .  D  ADDR  0006H     R   SEG=?DT?MAIN
RF_INIT . . . . . . . . . . .  C  ADDR  -------       EXT
RI. . . . . . . . . . . . . .  B  ADDR  0098H.0   A   
RS0 . . . . . . . . . . . . .  B  ADDR  00D0H.3   A   
RS1 . . . . . . . . . . . . .  B  ADDR  00D0H.4   A   
RSTREAS . . . . . . . . . . .  D  ADDR  00B1H     A   
RXD . . . . . . . . . . . . .  B  ADDR  0080H.1   A   
SBUF. . . . . . . . . . . . .  D  ADDR  0099H     A   
SCON. . . . . . . . . . . . .  D  ADDR  0098H     A   
SM0 . . . . . . . . . . . . .  B  ADDR  0098H.7   A   
SM1 . . . . . . . . . . . . .  B  ADDR  0098H.6   A   
SM2 . . . . . . . . . . . . .  B  ADDR  0098H.5   A   
SP. . . . . . . . . . . . . .  D  ADDR  0081H     A   
SPC_FNC . . . . . . . . . . .  D  ADDR  008FH     A   
SPI_CTRL. . . . . . . . . . .  D  ADDR  00B3H     A   
SPI_DATA. . . . . . . . . . .  D  ADDR  00B2H     A   
SPICLK. . . . . . . . . . . .  D  ADDR  00B4H     A   
T0. . . . . . . . . . . . . .  B  ADDR  0080H.5   A   
T1. . . . . . . . . . . . . .  B  ADDR  0080H.6   A   
T1_1V2. . . . . . . . . . . .  D  ADDR  00BCH     A   
T2. . . . . . . . . . . . . .  B  ADDR  0090H.0   A   
T2_1V2. . . . . . . . . . . .  D  ADDR  00BDH     A   
T2CON . . . . . . . . . . . .  D  ADDR  00C8H     A   
TB8 . . . . . . . . . . . . .  B  ADDR  0098H.3   A   
TCLK. . . . . . . . . . . . .  B  ADDR  00C8H.4   A   
TCON. . . . . . . . . . . . .  D  ADDR  0088H     A   
TEST_MODE . . . . . . . . . .  D  ADDR  00B7H     A   
TF0 . . . . . . . . . . . . .  B  ADDR  0088H.5   A   
TF1 . . . . . . . . . . . . .  B  ADDR  0088H.7   A   
TF2 . . . . . . . . . . . . .  B  ADDR  00C8H.7   A   
TH0 . . . . . . . . . . . . .  D  ADDR  008CH     A   
TH1 . . . . . . . . . . . . .  D  ADDR  008DH     A   
TH2 . . . . . . . . . . . . .  D  ADDR  00CDH     A   
TI. . . . . . . . . . . . . .  B  ADDR  0098H.1   A   
TICK_DV . . . . . . . . . . .  D  ADDR  00B5H     A   
TL0 . . . . . . . . . . . . .  D  ADDR  008AH     A   
TL1 . . . . . . . . . . . . .  D  ADDR  008BH     A   
TL2 . . . . . . . . . . . . .  D  ADDR  00CCH     A   
AX51 MACRO ASSEMBLER  MAIN                                                                  04/29/09 14:25:54 PAGE    13

TMOD. . . . . . . . . . . . .  D  ADDR  0089H     A   
TR0 . . . . . . . . . . . . .  B  ADDR  0088H.4   A   
TR1 . . . . . . . . . . . . .  B  ADDR  0088H.6   A   
TR2 . . . . . . . . . . . . .  B  ADDR  00C8H.2   A   
TXD . . . . . . . . . . . . .  B  ADDR  0080H.2   A   
WDTI. . . . . . . . . . . . .  B  ADDR  00D8H.3   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S).
