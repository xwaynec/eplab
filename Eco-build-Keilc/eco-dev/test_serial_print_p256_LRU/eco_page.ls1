AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     1


MACRO ASSEMBLER AX51 V3.06a
OBJECT MODULE PLACED IN .\eco_page.obj
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\AX51.exe .\eco_page.src EP DEBUG SYMBOLS OJ(.\eco_page.obj) PR(.\eco_page.ls1) 

LOC    OBJ             LINE     SOURCE

                          1     ; ./eco_page.src generated from: .\eco_page.c
                          2     ; COMPILER INVOKED BY:
                          3     ;        C:\Keil\C51\BIN\C51.exe .\eco_page.c BROWSE DEBUG CODE LISTINCLUDE SYMBOLS PREP
                               RINT ROM(LARGE) INCDIR(../../Include) SRC(./eco_page.src)
                          4     
                          5     $nomod51 
                          6     
                          7     NAME    ECO_PAGE
                          8     
 00A0.7                   9     PWR_UP  BIT     0A0H.7
 0080                    10     P0      DATA    080H
 0090                    11     P1      DATA    090H
 00D0.6                  12     AC      BIT     0D0H.6
 0080.5                  13     T0      BIT     080H.5
 00B3                    14     SPI_CTRL        DATA    0B3H
 0080.6                  15     T1      BIT     080H.6
 00A8.7                  16     EA      BIT     0A8H.7
 0090.0                  17     T2      BIT     090H.0
 00A0.6                  18     CE      BIT     0A0H.6
 00BE                    19     DEV_OFFSET      DATA    0BEH
 00A0.1                  20     CLK1    BIT     0A0H.1
 0090.2                  21     DIN0    BIT     090H.2
 00A0.5                  22     CLK2    BIT     0A0H.5
 0090.0                  23     DIO0    BIT     090H.0
 0083                    24     DPH0    DATA    083H
 0090.1                  25     DIO1    BIT     090H.1
 00A8                    26     IE      DATA    0A8H
 0085                    27     DPH1    DATA    085H
 0080.0                  28     DIO2    BIT     080H.0
 0080.1                  29     DIO3    BIT     080H.1
 0080.0                  30     P0_0    BIT     080H.0
 0090.0                  31     P1_0    BIT     090H.0
 0080.2                  32     DIO4    BIT     080H.2
 0080.1                  33     P0_1    BIT     080H.1
 0082                    34     DPL0    DATA    082H
 0090.1                  35     P1_1    BIT     090H.1
 0080.3                  36     DIO5    BIT     080H.3
 0080.2                  37     P0_2    BIT     080H.2
 0084                    38     DPL1    DATA    084H
 0090.2                  39     P1_2    BIT     090H.2
 0080.4                  40     DIO6    BIT     080H.4
 0080.3                  41     P0_3    BIT     080H.3
 0080.5                  42     DIO7    BIT     080H.5
 0080.4                  43     P0_4    BIT     080H.4
 00A4                    44     ADCSTATIC       DATA    0A4H
 0080.6                  45     DIO8    BIT     080H.6
 0080.5                  46     P0_5    BIT     080H.5
 00C8.6                  47     EXF2    BIT     0C8H.6
 00A0.3                  48     CS      BIT     0A0H.3
 0080.7                  49     DIO9    BIT     080H.7
 0080.6                  50     P0_6    BIT     080H.6
 0080.7                  51     P0_7    BIT     080H.7
 00A8.4                  52     ES      BIT     0A8H.4
 00B8                    53     IP      DATA    0B8H
 00A0.0                  54     DATA?   BIT     0A0H.0
 0098.0                  55     RI      BIT     098H.0
 00D0.7                  56     CY      BIT     0D0H.7
 0098.1                  57     TI      BIT     098H.1
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     2

 00BC                    58     T1_1V2  DATA    0BCH
 008F                    59     SPC_FNC DATA    08FH
 00BD                    60     T2_1V2  DATA    0BDH
 00CB                    61     RCAP2H  DATA    0CBH
 00B8.4                  62     PS      BIT     0B8H.4
 0081                    63     SP      DATA    081H
 00D0.2                  64     OV      BIT     0D0H.2
 00B6                    65     CK_CTRL DATA    0B6H
 00CA                    66     RCAP2L  DATA    0CAH
 00B5                    67     TICK_DV DATA    0B5H
 00B1                    68     RSTREAS DATA    0B1H
 00C8.1                  69     C_T2    BIT     0C8H.1
 00E8.4                  70     EWDI    BIT     0E8H.4
 00A1                    71     ADCCON  DATA    0A1H
 00C8.5                  72     RCLK    BIT     0C8H.5
 00A2                    73     ADCDATAH        DATA    0A2H
 0091                    74     EXIF    DATA    091H
 00C8.4                  75     TCLK    BIT     0C8H.4
 00A0.6                  76     DR2_CE  BIT     0A0H.6
 00A3                    77     ADCDATAL        DATA    0A3H
 0099                    78     SBUF    DATA    099H
 0087                    79     PCON    DATA    087H
 0098                    80     SCON    DATA    098H
 00F8.4                  81     PWDI    BIT     0F8H.4
 0089                    82     TMOD    DATA    089H
 0088                    83     TCON    DATA    088H
 00D8.3                  84     WDTI    BIT     0D8H.3
 00AA                    85     PWMDUTY DATA    0AAH
 0088.1                  86     IE0     BIT     088H.1
 0088.3                  87     IE1     BIT     088H.3
 0094                    88     P0_DIR  DATA    094H
 00F0                    89     B       DATA    0F0H
 0096                    90     P1_DIR  DATA    096H
 0095                    91     P0_ALT  DATA    095H
 0097                    92     P1_ALT  DATA    097H
 00C8.0                  93     CP_RL2  BIT     0C8H.0
 00A0.2                  94     DR1     BIT     0A0H.2
 00E0                    95     ACC     DATA    0E0H
 00A0.6                  96     DR2     BIT     0A0H.6
 00B7                    97     TEST_MODE       DATA    0B7H
 00B4                    98     SPICLK  DATA    0B4H
 00C8.1                  99     CT2     BIT     0C8H.1
 00A8.1                 100     ET0     BIT     0A8H.1
 00A8.3                 101     ET1     BIT     0A8H.3
 0088.5                 102     TF0     BIT     088H.5
 0080.3                 103     INT0_N  BIT     080H.3
 00A8.5                 104     ET2     BIT     0A8H.5
 0088.7                 105     TF1     BIT     088H.7
 0080.4                 106     INT1_N  BIT     080H.4
 00C8.7                 107     TF2     BIT     0C8H.7
 0098.2                 108     RB8     BIT     098H.2
 008C                   109     TH0     DATA    08CH
 00A8.0                 110     EX0     BIT     0A8H.0
 0088.0                 111     IT0     BIT     088H.0
 008D                   112     TH1     DATA    08DH
 00A8.2                 113     EX1     BIT     0A8H.2
 0098.3                 114     TB8     BIT     098H.3
 0088.2                 115     IT1     BIT     088H.2
 00CD                   116     TH2     DATA    0CDH
 00AD                   117     REGX_CTRL       DATA    0ADH
 00E8.0                 118     EX2     BIT     0E8H.0
 00D0.0                 119     P       BIT     0D0H.0
 00E8.1                 120     EX3     BIT     0E8H.1
 0098.7                 121     SM0     BIT     098H.7
 008A                   122     TL0     DATA    08AH
 00E8.2                 123     EX4     BIT     0E8H.2
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     3

 0098.6                 124     SM1     BIT     098H.6
 008B                   125     TL1     DATA    08BH
 00E8.3                 126     EX5     BIT     0E8H.3
 0098.5                 127     SM2     BIT     098H.5
 00CC                   128     TL2     DATA    0CCH
 00E8                   129     EIE     DATA    0E8H
 00B8.1                 130     PT0     BIT     0B8H.1
 00D0.3                 131     RS0     BIT     0D0H.3
 00B8.3                 132     PT1     BIT     0B8H.3
 00D0.4                 133     RS1     BIT     0D0H.4
 00B8.5                 134     PT2     BIT     0B8H.5
 0088.4                 135     TR0     BIT     088H.4
 00A9                   136     PWMCON  DATA    0A9H
 0088.6                 137     TR1     BIT     088H.6
 00C8.2                 138     TR2     BIT     0C8H.2
 00B8.0                 139     PX0     BIT     0B8H.0
 00B8.2                 140     PX1     BIT     0B8H.2
 00F8.0                 141     PX2     BIT     0F8H.0
 00F8.1                 142     PX3     BIT     0F8H.1
 00F8.2                 143     PX4     BIT     0F8H.2
 0083                   144     DPH     DATA    083H
 00F8.3                 145     PX5     BIT     0F8H.3
 00F8                   146     EIP     DATA    0F8H
 0082                   147     DPL     DATA    082H
 00C8.3                 148     EXEN2   BIT     0C8H.3
 00C8.0                 149     CPRL2   BIT     0C8H.0
 0098.4                 150     REN     BIT     098H.4
 00C8                   151     T2CON   DATA    0C8H
 0086                   152     DPS     DATA    086H
 00B2                   153     SPI_DATA        DATA    0B2H
 0092                   154     MPAGE   DATA    092H
 0080.1                 155     RXD     BIT     080H.1
 00A0.4                 156     DOUT2   BIT     0A0H.4
 00D8                   157     EICON   DATA    0D8H
 008E                   158     CKCON   DATA    08EH
 0080.2                 159     TXD     BIT     080H.2
 00A0                   160     RADIO   DATA    0A0H
 0080.7                 161     PWM     BIT     080H.7
 00D0.5                 162     F0      BIT     0D0H.5
 00D0.1                 163     F1      BIT     0D0H.1
 00AC                   164     REGX_LSB        DATA    0ACH
 00D0                   165     PSW     DATA    0D0H
 00AB                   166     REGX_MSB        DATA    0ABH
------                  167     ?PR?eco_page_init?ECO_PAGE               SEGMENT CODE 
------                  168     ?PR?eco_page_manager?ECO_PAGE            SEGMENT CODE 
------                  169     ?DT?eco_page_manager?ECO_PAGE            SEGMENT DATA OVERLAYABLE 
------                  170     ?DT?ECO_PAGE         SEGMENT DATA 
------                  171     ?ID?ECO_PAGE         SEGMENT IDATA 
                        172             EXTRN   CODE (_eeprom_read)
                        173             EXTRN   CODE (?C?ICALL2)
                        174             EXTRN   CODE (eeprom_init)
                        175             PUBLIC  ECO_PAGE_TABLE_INDEX
                        176             PUBLIC  ECO_PAGE_REGISTER7
                        177             PUBLIC  ECO_PAGE_REGISTER6
                        178             PUBLIC  ECO_PAGE_REGISTER5
                        179             PUBLIC  ECO_PAGE_REGISTER4
                        180             PUBLIC  ECO_PAGE_ADDR
                        181             PUBLIC  ECO_PAGE_REGISTER3
                        182             PUBLIC  ECO_PAGE_REGISTER2
                        183             PUBLIC  ECO_PAGE_REGISTER1
                        184             PUBLIC  ECO_PAGE_PREV_VID
                        185             PUBLIC  ECO_PAGE_PREV_PID
                        186             PUBLIC  ECO_PAGE_SPI_CONN
                        187             PUBLIC  ECO_PAGE_TABLE
                        188             PUBLIC  eco_page_manager
                        189             PUBLIC  eco_page_init
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     4

                        190     
------                  191             RSEG  ?DT?eco_page_manager?ECO_PAGE
000000                  192     ?eco_page_manager?BYTE:
000004                  193             ORG  4
000004                  194             seg?140:   DS   2
000006                  195             ORG  6
000006                  196               j?141:   DS   2
000000                  197             ORG  0
000000                  198               i?142:   DS   2
000002                  199             ORG  2
000002                  200      page_index?143:   DS   2
                        201     
------                  202             RSEG  ?DT?ECO_PAGE
000000                  203      ECO_PAGE_TABLE:   DS   4
000004                  204     ECO_PAGE_SPI_CONN:   DS   1
000005                  205     ECO_PAGE_PREV_PID:   DS   1
000006                  206     ECO_PAGE_PREV_VID:   DS   1
000007                  207       ECO_PAGE_ADDR:   DS   2
000009                  208     ECO_PAGE_TABLE_INDEX:   DS   1
                        209     
------                  210             RSEG  ?ID?ECO_PAGE
000000                  211     ECO_PAGE_REGISTER1:   DS   1
000001                  212     ECO_PAGE_REGISTER2:   DS   1
000002                  213     ECO_PAGE_REGISTER3:   DS   1
000003                  214     ECO_PAGE_REGISTER4:   DS   1
000004                  215     ECO_PAGE_REGISTER5:   DS   1
000005                  216     ECO_PAGE_REGISTER6:   DS   1
000006                  217     ECO_PAGE_REGISTER7:   DS   1
                        218     ; /*
                        219     ;  * Author(s): Wei-Han Chen (Embedded Platform Lab, NTHU)
                        220     ;  * Copyright (c) 2009 National Tsing Hua University (NTHU) 
                        221     ;  * Permission to copy, modify, and distribute this program is granted 
                        222     ;  * for noncommercial purposes, provided the author(s) and copyright
                        223     ;  * notice are retained. All other uses require explicit written
                        224     ;  * permission from NTHU. 
                        225     ;  *
                        226     ;  * Eco Paging Library 
                        227     ;  *
                        228     ;  * Wei-Han Chen <xwaynec@gmail.com> 
                        229     ;  * 2009/2/13
                        230     ;  */
                        231     ; 
                        232     ; #include "eco_page.h"
                        233     ; #include "eeprom/eeprom.h"
                        234     ; 
                        235     ; //control page replacement policy is LRU or Round-Robin
                        236     ; #define PAGE_REPLACEMENT 0
                        237     ; 
                        238     ; //#define ECO_PAGE_SIZE 256
                        239     ; //#define ECO_PAGE_ADDR_OFFSET 11 
                        240     ; 
                        241     ; 
                        242     ; //#define ECO_PAGE_SIZE 128
                        243     ; //#define ECO_PAGE_ADDR_OFFSET 23
                        244     ; 
                        245     ; 
                        246     ; 
                        247     ; //#define ECO_PAGE_SIZE 64
                        248     ; //#define ECO_PAGE_ADDR_OFFSET 47
                        249     ; 
                        250     ; 
                        251     ; #define ECO_PAGE_SIZE 256
                        252     ; #define ECO_PAGE_ADDR_OFFSET 14
                        253     ; 
                        254     ; 
                        255     ; #if ECO_PAGE_SIZE == 64
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     5

                        256     ;       
                        257     ;       #define ECO_PAGE_ENTRY  (64-ECO_PAGE_ADDR_OFFSET)
                        258     ;       #define ECO_PAGE_SHIFT  6
                        259     ;       #define ECO_PAGE_MASK   0x003F
                        260     ;       #define ECO_PAGE_MOV_MASK       0xFFC0
                        261     ; 
                        262     ;       unsigned int idata ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        263     ;       //Eco page virtual address id
                        264     ;       unsigned int ECO_PAGE_PREV_VID;
                        265     ;       //Eco page physical address id 
                        266     ;       unsigned int ECO_PAGE_PREV_PID;
                        267     ; 
                        268     ; #elif ECO_PAGE_SIZE == 128
                        269     ;       
                        270     ;       #define ECO_PAGE_ENTRY (32-ECO_PAGE_ADDR_OFFSET)
                        271     ;       #define ECO_PAGE_SHIFT  7
                        272     ;       #define ECO_PAGE_MASK   0x007F
                        273     ;       #define ECO_PAGE_MOV_MASK       0xFF80
                        274     ; 
                        275     ;       unsigned int idata ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        276     ;       //Eco page virtual address id
                        277     ;       unsigned int ECO_PAGE_PREV_VID;
                        278     ;       //Eco page physical address id 
                        279     ;       unsigned int ECO_PAGE_PREV_PID;
                        280     ; 
                        281     ; #elif ECO_PAGE_SIZE == 256
                        282     ;       
                        283     ;       #define ECO_PAGE_ENTRY  (16-ECO_PAGE_ADDR_OFFSET)
                        284     ;       #define ECO_PAGE_SHIFT  8       
                        285     ;       #define ECO_PAGE_MASK   0x00FF
                        286     ;       #define ECO_PAGE_MOV_MASK       0xFF00
                        287     ; 
                        288     ;       unsigned int ECO_PAGE_TABLE[ECO_PAGE_ENTRY];
                        289     ;       //Eco page virtual address id
                        290     ;       unsigned char ECO_PAGE_PREV_VID;
                        291     ;       //Eco page physical address id 
                        292     ;       unsigned char ECO_PAGE_PREV_PID;
                        293     ; 
                        294     ; #endif
                        295     ; 
                        296     ; unsigned char ECO_PAGE_TABLE_INDEX;
                        297     ; unsigned int ECO_PAGE_ADDR;
                        298     ; unsigned char ECO_PAGE_SPI_CONN;
                        299     ; 
                        300     ; unsigned char idata ECO_PAGE_REGISTER1;
                        301     ; unsigned char idata ECO_PAGE_REGISTER2;
                        302     ; unsigned char idata ECO_PAGE_REGISTER3;
                        303     ; unsigned char idata ECO_PAGE_REGISTER4;
                        304     ; unsigned char idata ECO_PAGE_REGISTER5;
                        305     ; unsigned char idata ECO_PAGE_REGISTER6;
                        306     ; unsigned char idata ECO_PAGE_REGISTER7;
                        307     ; 
                        308     ; 
                        309     ; void eco_page_init()
                        310     
------                  311             RSEG  ?PR?eco_page_init?ECO_PAGE
000000                  312     eco_page_init:
                        313                             ; SOURCE LINE # 92
                        314     ; {
                        315                             ; SOURCE LINE # 93
                        316     ;       //ECO_PAGE_TABLE_INDEX = ECO_PAGE_ENTRY - 1;
                        317     ;       ECO_PAGE_TABLE_INDEX = 0;       
                        318                             ; SOURCE LINE # 95
000000 E4               319             CLR     A
000001 F500       F     320             MOV     ECO_PAGE_TABLE_INDEX,A
                        321     ;       ECO_PAGE_ADDR = 0;
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     6

                        322                             ; SOURCE LINE # 96
000003 F500       F     323             MOV     ECO_PAGE_ADDR,A
000005 F500       F     324             MOV     ECO_PAGE_ADDR+01H,A
                        325     ;       ECO_PAGE_PREV_VID = 0;
                        326                             ; SOURCE LINE # 97
000007 F500       F     327             MOV     ECO_PAGE_PREV_VID,A
                        328     ;       ECO_PAGE_PREV_PID = 0;
                        329                             ; SOURCE LINE # 98
000009 F500       F     330             MOV     ECO_PAGE_PREV_PID,A
                        331     ; }
                        332                             ; SOURCE LINE # 99
00000B 22               333             RET     
                        334     ; END OF eco_page_init
                        335     
                        336     ; 
                        337     ; 
                        338     ; #if PAGE_REPLACEMENT == 0 
                        339     ; //LRU page replacement
                        340     ; void eco_page_manager()
                        341     
------                  342             RSEG  ?PR?eco_page_manager?ECO_PAGE
000000                  343     eco_page_manager:
                        344             USING   0
                        345                             ; SOURCE LINE # 104
                        346     ; {
                        347                             ; SOURCE LINE # 105
                        348     ;       unsigned int i;
                        349     ;       unsigned int page_index = -1;
                        350                             ; SOURCE LINE # 107
000000 74FF             351             MOV     A,#0FFH
000002 F500       F     352             MOV     page_index?143,A
000004 F500       F     353             MOV     page_index?143+01H,A
                        354     ; 
                        355     ;       //if page id is the same with the last page id
                        356     ;       if((ECO_PAGE_ADDR >> ECO_PAGE_SHIFT) == ECO_PAGE_PREV_PID)
                        357                             ; SOURCE LINE # 110
000006 E500       F     358             MOV     A,ECO_PAGE_ADDR
000008 B50037           359             CJNE    A,ECO_PAGE_PREV_PID,?C0002
                        360     ;       {
                        361                             ; SOURCE LINE # 111
                        362     ;               //virtual address id + function offset
                        363     ;               ECO_PAGE_ADDR = (ECO_PAGE_PREV_VID << ECO_PAGE_SHIFT) + (ECO_PAGE_ADDR &
                                ECO_PAGE_MASK);
                        364                             ; SOURCE LINE # 113
00000B E500       F     365             MOV     A,ECO_PAGE_PREV_VID
00000D FE               366             MOV     R6,A
00000E 7C00             367             MOV     R4,#00H
000010 E4               368             CLR     A
000011 2500       F     369             ADD     A,ECO_PAGE_ADDR+01H
000013 F500       F     370             MOV     ECO_PAGE_ADDR+01H,A
000015 EC               371             MOV     A,R4
000016 3E               372             ADDC    A,R6
000017 F500       F     373             MOV     ECO_PAGE_ADDR,A
                        374     ;               #pragma asm
000019 7800       F     375             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
00001B E6               376             MOV     A,@R0
00001C F9               377             MOV     R1,A
00001D 7800       F     378             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
00001F E6               379             MOV     A,@R0
000020 FA               380             MOV     R2,A
000021 7800       F     381             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
000023 E6               382             MOV     A,@R0
000024 FB               383             MOV     R3,A
000025 7800       F     384             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
000027 E6               385             MOV     A,@R0
000028 FC               386             MOV     R4,A
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     7

000029 7800       F     387             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
00002B E6               388             MOV     A,@R0
00002C FD               389             MOV     R5,A
00002D 7800       F     390             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
00002F E6               391             MOV     A,@R0
000030 FE               392             MOV     R6,A
000031 7800       F     393             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
000033 E6               394             MOV     A,@R0
000034 FF               395             MOV     R7,A
000035 8500B3     F     396             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
000038 850083     F     397             MOV     DPH,ECO_PAGE_ADDR
00003B 850082     F     398             MOV     DPL,ECO_PAGE_ADDR+01H
00003E 120000     E     399             LCALL   ?C?ICALL2
                        400     ;               //eco_page_function_call
                        401               
000041 22               402             RET     
                        403     ;               #pragma endasm
                        404     ;               return ;
                        405     ;       }
                        406                             ; SOURCE LINE # 118
000042                  407     ?C0002:
                        408     ; 
                        409     ;       //Check Table   
                        410     ;       for(i=0;i<ECO_PAGE_ENTRY;i++)
                        411                             ; SOURCE LINE # 121
000042 E4               412             CLR     A
000043 F500       F     413             MOV     i?142,A
000045 F500       F     414             MOV     i?142+01H,A
000047                  415     ?C0004:
                        416     ;       {   
                        417                             ; SOURCE LINE # 122
                        418     ;               if((ECO_PAGE_ADDR >> ECO_PAGE_SHIFT) == (ECO_PAGE_TABLE[i] & 0x7FFF))
                        419                             ; SOURCE LINE # 123
000047 AD00       F     420             MOV     R5,i?142+01H
000049 ED               421             MOV     A,R5
00004A 25E0             422             ADD     A,ACC
00004C 2400       F     423             ADD     A,#LOW (ECO_PAGE_TABLE)
00004E F8               424             MOV     R0,A
00004F E6               425             MOV     A,@R0
000050 FE               426             MOV     R6,A
000051 08               427             INC     R0
000052 E6               428             MOV     A,@R0
000053 FF               429             MOV     R7,A
000054 EE               430             MOV     A,R6
000055 547F             431             ANL     A,#07FH
000057 FA               432             MOV     R2,A
000058 AB07             433             MOV     R3,AR7
00005A E500       F     434             MOV     A,ECO_PAGE_ADDR
00005C B50322           435             CJNE    A,AR3,?C0006
00005F E4               436             CLR     A
000060 B5021E           437             CJNE    A,AR2,?C0006
                        438     ;               {
                        439                             ; SOURCE LINE # 124
                        440     ;                       page_index = i;
                        441                             ; SOURCE LINE # 125
000063 850000     F     442             MOV     page_index?143,i?142
000066 850000     F     443             MOV     page_index?143+01H,i?142+01H
                        444     ; 
                        445     ;                       //set LRU bit is 1
                        446     ;                       ECO_PAGE_TABLE[i] = ECO_PAGE_TABLE[i] | 0x8000;
                        447                             ; SOURCE LINE # 128
000069 ED               448             MOV     A,R5
00006A 25E0             449             ADD     A,ACC
00006C 2400       F     450             ADD     A,#LOW (ECO_PAGE_TABLE)
00006E F8               451             MOV     R0,A
00006F C000             452             PUSH    AR0
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     8

000071 E6               453             MOV     A,@R0
000072 FE               454             MOV     R6,A
000073 08               455             INC     R0
000074 E6               456             MOV     A,@R0
000075 FF               457             MOV     R7,A
000076 EE               458             MOV     A,R6
000077 4480             459             ORL     A,#080H
000079 D000             460             POP     AR0
00007B F6               461             MOV     @R0,A
00007C 08               462             INC     R0
00007D A607             463             MOV     @R0,AR7
                        464     ;                       break;
                        465                             ; SOURCE LINE # 129
00007F 800E             466             SJMP    ?C0005
                        467     ;               }
                        468                             ; SOURCE LINE # 130
                        469     ;       }
                        470                             ; SOURCE LINE # 131
000081                  471     ?C0006:
000081 0500       F     472             INC     i?142+01H
000083 E500       F     473             MOV     A,i?142+01H
000085 7002             474             JNZ     ?C0020
000087 0500       F     475             INC     i?142
000089                  476     ?C0020:
000089 6402             477             XRL     A,#02H
00008B 4500       F     478             ORL     A,i?142
00008D 70B8             479             JNZ     ?C0004
00008F                  480     ?C0005:
                        481     ; 
                        482     ;       if(page_index != -1)
                        483                             ; SOURCE LINE # 133
00008F E500       F     484             MOV     A,page_index?143+01H
000091 F4               485             CPL     A
000092 7003             486             JNZ     ?C0021
000094 E500       F     487             MOV     A,page_index?143
000096 F4               488             CPL     A
000097                  489     ?C0021:
000097 6041             490             JZ      ?C0008
                        491     ;       {
                        492                             ; SOURCE LINE # 134
                        493     ;               //store function physical addres id 
                        494     ;               ECO_PAGE_PREV_PID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
                        495                             ; SOURCE LINE # 136
000099 E500       F     496             MOV     A,ECO_PAGE_ADDR
00009B F500       F     497             MOV     ECO_PAGE_PREV_PID,A
                        498     ;       
                        499     ;               //memory page is in ram
                        500     ;               ECO_PAGE_ADDR = ((page_index + ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_SHIFT) 
                               + (ECO_PAGE_ADDR & ECO_PAGE_MASK);
                        501                             ; SOURCE LINE # 139
00009D E500       F     502             MOV     A,page_index?143+01H
00009F 240E             503             ADD     A,#0EH
0000A1 FF               504             MOV     R7,A
0000A2 EF               505             MOV     A,R7
0000A3 FE               506             MOV     R6,A
0000A4 7C00             507             MOV     R4,#00H
0000A6 E4               508             CLR     A
0000A7 2500       F     509             ADD     A,ECO_PAGE_ADDR+01H
0000A9 F500       F     510             MOV     ECO_PAGE_ADDR+01H,A
0000AB EC               511             MOV     A,R4
0000AC 3E               512             ADDC    A,R6
0000AD F500       F     513             MOV     ECO_PAGE_ADDR,A
                        514     ; 
                        515     ;               //cache the virtual address id
                        516     ;               ECO_PAGE_PREV_VID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
                        517                             ; SOURCE LINE # 142
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE     9

0000AF F500       F     518             MOV     ECO_PAGE_PREV_VID,A
                        519     ; 
                        520     ; 
                        521     ;               
                        522     ;               #pragma asm
0000B1 7800       F     523             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
0000B3 E6               524             MOV     A,@R0
0000B4 F9               525             MOV     R1,A
0000B5 7800       F     526             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
0000B7 E6               527             MOV     A,@R0
0000B8 FA               528             MOV     R2,A
0000B9 7800       F     529             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
0000BB E6               530             MOV     A,@R0
0000BC FB               531             MOV     R3,A
0000BD 7800       F     532             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
0000BF E6               533             MOV     A,@R0
0000C0 FC               534             MOV     R4,A
0000C1 7800       F     535             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
0000C3 E6               536             MOV     A,@R0
0000C4 FD               537             MOV     R5,A
0000C5 7800       F     538             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
0000C7 E6               539             MOV     A,@R0
0000C8 FE               540             MOV     R6,A
0000C9 7800       F     541             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
0000CB E6               542             MOV     A,@R0
0000CC FF               543             MOV     R7,A
0000CD 8500B3     F     544             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
0000D0 850083     F     545             MOV     DPH,ECO_PAGE_ADDR
0000D3 850082     F     546             MOV     DPL,ECO_PAGE_ADDR+01H
0000D6 120000     E     547             LCALL   ?C?ICALL2
                        548     ;               //eco_page_function_call
                        549               
                        550     ;               //MOV     DPH,ECO_PAGE_ADDR
                        551               
                        552     ;               //MOV     DPL,ECO_PAGE_ADDR+01H
                        553               
                        554     ;               //LCALL ?C?ICALL2
                        555               
0000D9 22               556             RET     
                        557     ;               #pragma endasm
                        558     ; 
                        559     ;               return ;
                        560     ;       }       
                        561                             ; SOURCE LINE # 154
0000DA                  562     ?C0008:
                        563     ;       else
                        564     ;       {
                        565                             ; SOURCE LINE # 156
                        566     ;               //page fault
                        567     ;               for(i=(ECO_PAGE_TABLE_INDEX+1)%ECO_PAGE_ENTRY; ;i=(i+1)%ECO_PAGE_ENTRY)
                        568                             ; SOURCE LINE # 158
0000DA E500       F     569             MOV     A,ECO_PAGE_TABLE_INDEX
0000DC 020000     F     570             LJMP    ?C0023
0000DF                  571     ?C0010:
                        572     ;               {
                        573                             ; SOURCE LINE # 159
                        574     ;                       if((ECO_PAGE_TABLE[i] & 0x8000) == 0x8000)
                        575                             ; SOURCE LINE # 160
0000DF AF00       F     576             MOV     R7,i?142+01H
0000E1 EF               577             MOV     A,R7
0000E2 25E0             578             ADD     A,ACC
0000E4 2400       F     579             ADD     A,#LOW (ECO_PAGE_TABLE)
0000E6 F8               580             MOV     R0,A
0000E7 E6               581             MOV     A,@R0
0000E8 FC               582             MOV     R4,A
0000E9 08               583             INC     R0
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    10

0000EA EC               584             MOV     A,R4
0000EB 30E70D           585             JNB     ACC.7,?C0013
                        586     ;                       {
                        587                             ; SOURCE LINE # 161
                        588     ;                               //LRU bit is 1 and then set this bit is 0
                        589     ;                               ECO_PAGE_TABLE[i] = ECO_PAGE_TABLE[i] & 0x7FFF;
                        590                             ; SOURCE LINE # 163
0000EE EF               591             MOV     A,R7
0000EF 25E0             592             ADD     A,ACC
0000F1 2400       F     593             ADD     A,#LOW (ECO_PAGE_TABLE)
0000F3 F8               594             MOV     R0,A
0000F4 E6               595             MOV     A,@R0
0000F5 547F             596             ANL     A,#07FH
0000F7 F6               597             MOV     @R0,A
                        598     ;                       }
                        599                             ; SOURCE LINE # 164
0000F8 020000     F     600             LJMP    ?C0012
0000FB                  601     ?C0013:
                        602     ;                       else
                        603     ;                       {
                        604                             ; SOURCE LINE # 166
                        605     ;                               unsigned char xdata *seg = (unsigned char xdata *)((i + 
                               ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_SHIFT);
                        606                             ; SOURCE LINE # 167
0000FB E500       F     607             MOV     A,i?142+01H
0000FD 240E             608             ADD     A,#0EH
0000FF FF               609             MOV     R7,A
000100 E4               610             CLR     A
000101 3500       F     611             ADDC    A,i?142
000103 EF               612             MOV     A,R7
000104 F500       F     613             MOV     seg?140,A
000106 750000     F     614             MOV     seg?140+01H,#00H
                        615     ;                               unsigned int j;
                        616     ;                               
                        617     ;                               //memory page is in ram
                        618     ;                               eeprom_init();
                        619                             ; SOURCE LINE # 171
000109 120000     E     620             LCALL   eeprom_init
                        621     ; 
                        622     ;                               //mov code from eeprom to external ram
                        623     ;                               for(j=0;j<ECO_PAGE_SIZE;j++)
                        624                             ; SOURCE LINE # 174
00010C E4               625             CLR     A
00010D F500       F     626             MOV     j?141,A
00010F F500       F     627             MOV     j?141+01H,A
000111                  628     ?C0015:
                        629     ;                               {
                        630                             ; SOURCE LINE # 175
                        631     ;                                       *(seg+j) = eeprom_read(ECO_ADDR_SHIFT(ECO_PAGE_A
                               DDR & ECO_PAGE_MOV_MASK ) +j);
                        632                             ; SOURCE LINE # 176
000111 E4               633             CLR     A
000112 2403             634             ADD     A,#03H
000114 FF               635             MOV     R7,A
000115 E4               636             CLR     A
000116 3500       F     637             ADDC    A,ECO_PAGE_ADDR
000118 CF               638             XCH     A,R7
000119 2500       F     639             ADD     A,j?141+01H
00011B CF               640             XCH     A,R7
00011C 3500       F     641             ADDC    A,j?141
00011E FE               642             MOV     R6,A
00011F 120000     E     643             LCALL   _eeprom_read
000122 E500       F     644             MOV     A,seg?140+01H
000124 2500       F     645             ADD     A,j?141+01H
000126 F582             646             MOV     DPL,A
000128 E500       F     647             MOV     A,seg?140
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    11

00012A 3500       F     648             ADDC    A,j?141
00012C F583             649             MOV     DPH,A
00012E EF               650             MOV     A,R7
00012F F0               651             MOVX    @DPTR,A
                        652     ;                               }
                        653                             ; SOURCE LINE # 177
000130 0500       F     654             INC     j?141+01H
000132 E500       F     655             MOV     A,j?141+01H
000134 7002             656             JNZ     ?C0022
000136 0500       F     657             INC     j?141
000138                  658     ?C0022:
000138 C3               659             CLR     C
000139 E500       F     660             MOV     A,j?141
00013B 9401             661             SUBB    A,#01H
00013D 40D2             662             JC      ?C0015
00013F                  663     ?C0016:
                        664     ;                               
                        665     ;                               //update page table to connect this physical address id 
                               with virtual address id 
                        666     ;                               ECO_PAGE_TABLE[i] = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;
                        667                             ; SOURCE LINE # 180
00013F E500       F     668             MOV     A,ECO_PAGE_ADDR
000141 FF               669             MOV     R7,A
000142 AD00       F     670             MOV     R5,i?142+01H
000144 ED               671             MOV     A,R5
000145 25E0             672             ADD     A,ACC
000147 2400       F     673             ADD     A,#LOW (ECO_PAGE_TABLE)
000149 F8               674             MOV     R0,A
00014A 7600             675             MOV     @R0,#00H
00014C 08               676             INC     R0
00014D A607             677             MOV     @R0,AR7
                        678     ; 
                        679     ;                               //store physical address id
                        680     ;                               ECO_PAGE_PREV_PID = ECO_PAGE_TABLE[i];
                        681                             ; SOURCE LINE # 183
00014F ED               682             MOV     A,R5
000150 25E0             683             ADD     A,ACC
000152 2400       F     684             ADD     A,#LOW (ECO_PAGE_TABLE)
000154 F8               685             MOV     R0,A
000155 08               686             INC     R0
000156 E6               687             MOV     A,@R0
000157 F500       F     688             MOV     ECO_PAGE_PREV_PID,A
                        689     ; 
                        690     ;                               //update page address e.g.  (page_id<<8) + page_offset
                        691     ;                               ECO_PAGE_ADDR = ((i + ECO_PAGE_ADDR_OFFSET) << ECO_PAGE_
                               SHIFT) + (ECO_PAGE_ADDR & ECO_PAGE_MASK);
                        692                             ; SOURCE LINE # 186
000159 E500       F     693             MOV     A,i?142+01H
00015B 240E             694             ADD     A,#0EH
00015D FF               695             MOV     R7,A
00015E EF               696             MOV     A,R7
00015F FE               697             MOV     R6,A
000160 7C00             698             MOV     R4,#00H
000162 E4               699             CLR     A
000163 2500       F     700             ADD     A,ECO_PAGE_ADDR+01H
000165 F500       F     701             MOV     ECO_PAGE_ADDR+01H,A
000167 EC               702             MOV     A,R4
000168 3E               703             ADDC    A,R6
000169 F500       F     704             MOV     ECO_PAGE_ADDR,A
                        705     ; 
                        706     ;                               //store virtual address id 
                        707     ;                               ECO_PAGE_PREV_VID = ECO_PAGE_ADDR >> ECO_PAGE_SHIFT;    
                        708                             ; SOURCE LINE # 189
00016B F500       F     709             MOV     ECO_PAGE_PREV_VID,A
                        710     ; 
                        711     ;                               //mov to the next index
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    12

                        712     ;                               ECO_PAGE_TABLE_INDEX = i;
                        713                             ; SOURCE LINE # 192
00016D 850000     F     714             MOV     ECO_PAGE_TABLE_INDEX,i?142+01H
                        715     ; 
                        716     ;                               //jump  to function address
                        717     ;                               #pragma asm
000170 7800       F     718             MOV     R0,#LOW (ECO_PAGE_REGISTER1)
000172 E6               719             MOV     A,@R0
000173 F9               720             MOV     R1,A
000174 7800       F     721             MOV     R0,#LOW (ECO_PAGE_REGISTER2)
000176 E6               722             MOV     A,@R0
000177 FA               723             MOV     R2,A
000178 7800       F     724             MOV     R0,#LOW (ECO_PAGE_REGISTER3)
00017A E6               725             MOV     A,@R0
00017B FB               726             MOV     R3,A
00017C 7800       F     727             MOV     R0,#LOW (ECO_PAGE_REGISTER4)
00017E E6               728             MOV     A,@R0
00017F FC               729             MOV     R4,A
000180 7800       F     730             MOV     R0,#LOW (ECO_PAGE_REGISTER5)
000182 E6               731             MOV     A,@R0
000183 FD               732             MOV     R5,A
000184 7800       F     733             MOV     R0,#LOW (ECO_PAGE_REGISTER6)
000186 E6               734             MOV     A,@R0
000187 FE               735             MOV     R6,A
000188 7800       F     736             MOV     R0,#LOW (ECO_PAGE_REGISTER7)
00018A E6               737             MOV     A,@R0
00018B FF               738             MOV     R7,A
00018C 8500B3     F     739             MOV     SPI_CTRL,ECO_PAGE_SPI_CONN
00018F 850083     F     740             MOV     DPH,ECO_PAGE_ADDR
000192 850082     F     741             MOV     DPL,ECO_PAGE_ADDR+01H
000195 120000     E     742             LCALL   ?C?ICALL2
                        743     ;                               //eco_page_function_call
                        744               
                        745     ;                               //MOV     DPH,ECO_PAGE_ADDR
                        746               
                        747     ;                               //MOV     DPL,ECO_PAGE_ADDR+01H
                        748               
                        749     ;                               //LCALL        ?C?ICALL2               
                        750               
000198 22               751             RET     
                        752     ;                               #pragma endasm
                        753     ;                               
                        754     ;                               return ;
                        755     ;                               
                        756     ;                       }
                        757                             ; SOURCE LINE # 204
                        758     ;               }
                        759                             ; SOURCE LINE # 205
000199                  760     ?C0012:
000199 E500       F     761             MOV     A,i?142+01H
00019B                  762     ?C0023:
00019B 2401             763             ADD     A,#01H
00019D FF               764             MOV     R7,A
00019E 750000     F     765             MOV     i?142,#00H
0001A1 EF               766             MOV     A,R7
0001A2 5401             767             ANL     A,#01H
0001A4 F500       F     768             MOV     i?142+01H,A
0001A6 020000     F     769             LJMP    ?C0010
                        770     ; END OF eco_page_manager
                        771     
                        772             END
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                    T Y P E  V A L U E     ATTRIBUTES

?C0002. . . . . . . . . . . . . . . . .    C  ADDR  0042H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0004. . . . . . . . . . . . . . . . .    C  ADDR  0047H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0005. . . . . . . . . . . . . . . . .    C  ADDR  008FH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0006. . . . . . . . . . . . . . . . .    C  ADDR  0081H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0008. . . . . . . . . . . . . . . . .    C  ADDR  00DAH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0010. . . . . . . . . . . . . . . . .    C  ADDR  00DFH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0012. . . . . . . . . . . . . . . . .    C  ADDR  0199H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0013. . . . . . . . . . . . . . . . .    C  ADDR  00FBH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0015. . . . . . . . . . . . . . . . .    C  ADDR  0111H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0016. . . . . . . . . . . . . . . . .    C  ADDR  013FH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0020. . . . . . . . . . . . . . . . .    C  ADDR  0089H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0021. . . . . . . . . . . . . . . . .    C  ADDR  0097H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0022. . . . . . . . . . . . . . . . .    C  ADDR  0138H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C0023. . . . . . . . . . . . . . . . .    C  ADDR  019BH     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
?C?ICALL2 . . . . . . . . . . . . . . .    C  ADDR  -------       EXT
?DT?ECO_PAGE. . . . . . . . . . . . . .    D  SEG   00000AH       REL=UNIT, ALN=BYTE
?DT?ECO_PAGE_MANAGER?ECO_PAGE . . . . .    D  SEG   000008H       REL=UNIT, ALN=BYTE
?ECO_PAGE_MANAGER?BYTE. . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
?ID?ECO_PAGE. . . . . . . . . . . . . .    I  SEG   000007H       REL=UNIT, ALN=BYTE
?PR?ECO_PAGE_INIT?ECO_PAGE. . . . . . .    C  SEG   00000CH       REL=UNIT, ALN=BYTE
?PR?ECO_PAGE_MANAGER?ECO_PAGE . . . . .    C  SEG   0001A9H       REL=UNIT, ALN=BYTE
_EEPROM_READ. . . . . . . . . . . . . .    C  ADDR  -------       EXT
AC. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.6   A   
ACC . . . . . . . . . . . . . . . . . .    D  ADDR  00E0H     A   
ADCCON. . . . . . . . . . . . . . . . .    D  ADDR  00A1H     A   
ADCDATAH. . . . . . . . . . . . . . . .    D  ADDR  00A2H     A   
ADCDATAL. . . . . . . . . . . . . . . .    D  ADDR  00A3H     A   
ADCSTATIC . . . . . . . . . . . . . . .    D  ADDR  00A4H     A   
AR0 . . . . . . . . . . . . . . . . . .    D  ADDR  0000H     A   
AR2 . . . . . . . . . . . . . . . . . .    D  ADDR  0002H     A   
AR3 . . . . . . . . . . . . . . . . . .    D  ADDR  0003H     A   
AR7 . . . . . . . . . . . . . . . . . .    D  ADDR  0007H     A   
B . . . . . . . . . . . . . . . . . . .    D  ADDR  00F0H     A   
C_T2. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.1   A   
CE. . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
CK_CTRL . . . . . . . . . . . . . . . .    D  ADDR  00B6H     A   
CKCON . . . . . . . . . . . . . . . . .    D  ADDR  008EH     A   
CLK1. . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.1   A   
CLK2. . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.5   A   
CP_RL2. . . . . . . . . . . . . . . . .    B  ADDR  00C8H.0   A   
CPRL2 . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.0   A   
CS. . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.3   A   
CT2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.1   A   
CY. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.7   A   
DATA? . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.0   A   
DEV_OFFSET. . . . . . . . . . . . . . .    D  ADDR  00BEH     A   
DIN0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.2   A   
DIO0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
DIO1. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.1   A   
DIO2. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.0   A   
DIO3. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
DIO4. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
DIO5. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
DIO6. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
DIO7. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
DIO8. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
DIO9. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
DOUT2 . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.4   A   
DPH . . . . . . . . . . . . . . . . . .    D  ADDR  0083H     A   
DPH0. . . . . . . . . . . . . . . . . .    D  ADDR  0083H     A   
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    14

DPH1. . . . . . . . . . . . . . . . . .    D  ADDR  0085H     A   
DPL . . . . . . . . . . . . . . . . . .    D  ADDR  0082H     A   
DPL0. . . . . . . . . . . . . . . . . .    D  ADDR  0082H     A   
DPL1. . . . . . . . . . . . . . . . . .    D  ADDR  0084H     A   
DPS . . . . . . . . . . . . . . . . . .    D  ADDR  0086H     A   
DR1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.2   A   
DR2 . . . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
DR2_CE. . . . . . . . . . . . . . . . .    B  ADDR  00A0H.6   A   
EA. . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.7   A   
ECO_PAGE. . . . . . . . . . . . . . . .    -- ----  -------       
ECO_PAGE_ADDR . . . . . . . . . . . . .    D  ADDR  0007H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_INIT . . . . . . . . . . . . .    C  ADDR  0000H     R   SEG=?PR?ECO_PAGE_INIT?ECO_PAGE
ECO_PAGE_MANAGER. . . . . . . . . . . .    C  ADDR  0000H     R   SEG=?PR?ECO_PAGE_MANAGER?ECO_PAGE
ECO_PAGE_PREV_PID . . . . . . . . . . .    D  ADDR  0005H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_PREV_VID . . . . . . . . . . .    D  ADDR  0006H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_REGISTER1. . . . . . . . . . .    I  ADDR  0000H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER2. . . . . . . . . . .    I  ADDR  0001H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER3. . . . . . . . . . .    I  ADDR  0002H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER4. . . . . . . . . . .    I  ADDR  0003H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER5. . . . . . . . . . .    I  ADDR  0004H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER6. . . . . . . . . . .    I  ADDR  0005H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_REGISTER7. . . . . . . . . . .    I  ADDR  0006H     R   SEG=?ID?ECO_PAGE
ECO_PAGE_SPI_CONN . . . . . . . . . . .    D  ADDR  0004H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_TABLE. . . . . . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE
ECO_PAGE_TABLE_INDEX. . . . . . . . . .    D  ADDR  0009H     R   SEG=?DT?ECO_PAGE
EEPROM_INIT . . . . . . . . . . . . . .    C  ADDR  -------       EXT
EICON . . . . . . . . . . . . . . . . .    D  ADDR  00D8H     A   
EIE . . . . . . . . . . . . . . . . . .    D  ADDR  00E8H     A   
EIP . . . . . . . . . . . . . . . . . .    D  ADDR  00F8H     A   
ES. . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.4   A   
ET0 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.1   A   
ET1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.3   A   
ET2 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.5   A   
EWDI. . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.4   A   
EX0 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.0   A   
EX1 . . . . . . . . . . . . . . . . . .    B  ADDR  00A8H.2   A   
EX2 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.0   A   
EX3 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.1   A   
EX4 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.2   A   
EX5 . . . . . . . . . . . . . . . . . .    B  ADDR  00E8H.3   A   
EXEN2 . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.3   A   
EXF2. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.6   A   
EXIF. . . . . . . . . . . . . . . . . .    D  ADDR  0091H     A   
F0. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.5   A   
F1. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.1   A   
I?142 . . . . . . . . . . . . . . . . .    D  ADDR  0000H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
IE. . . . . . . . . . . . . . . . . . .    D  ADDR  00A8H     A   
IE0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.1   A   
IE1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.3   A   
INT0_N. . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
INT1_N. . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
IP. . . . . . . . . . . . . . . . . . .    D  ADDR  00B8H     A   
IT0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.0   A   
IT1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.2   A   
J?141 . . . . . . . . . . . . . . . . .    D  ADDR  0006H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
MPAGE . . . . . . . . . . . . . . . . .    D  ADDR  0092H     A   
OV. . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.2   A   
P . . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.0   A   
P0. . . . . . . . . . . . . . . . . . .    D  ADDR  0080H     A   
P0_0. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.0   A   
P0_1. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
P0_2. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
P0_3. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.3   A   
P0_4. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.4   A   
P0_5. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
P0_6. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    15

P0_7. . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
P0_ALT. . . . . . . . . . . . . . . . .    D  ADDR  0095H     A   
P0_DIR. . . . . . . . . . . . . . . . .    D  ADDR  0094H     A   
P1. . . . . . . . . . . . . . . . . . .    D  ADDR  0090H     A   
P1_0. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
P1_1. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.1   A   
P1_2. . . . . . . . . . . . . . . . . .    B  ADDR  0090H.2   A   
P1_ALT. . . . . . . . . . . . . . . . .    D  ADDR  0097H     A   
P1_DIR. . . . . . . . . . . . . . . . .    D  ADDR  0096H     A   
PAGE_INDEX?143. . . . . . . . . . . . .    D  ADDR  0002H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
PCON. . . . . . . . . . . . . . . . . .    D  ADDR  0087H     A   
PS. . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.4   A   
PSW . . . . . . . . . . . . . . . . . .    D  ADDR  00D0H     A   
PT0 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.1   A   
PT1 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.3   A   
PT2 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.5   A   
PWDI. . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.4   A   
PWM . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.7   A   
PWMCON. . . . . . . . . . . . . . . . .    D  ADDR  00A9H     A   
PWMDUTY . . . . . . . . . . . . . . . .    D  ADDR  00AAH     A   
PWR_UP. . . . . . . . . . . . . . . . .    B  ADDR  00A0H.7   A   
PX0 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.0   A   
PX1 . . . . . . . . . . . . . . . . . .    B  ADDR  00B8H.2   A   
PX2 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.0   A   
PX3 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.1   A   
PX4 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.2   A   
PX5 . . . . . . . . . . . . . . . . . .    B  ADDR  00F8H.3   A   
RADIO . . . . . . . . . . . . . . . . .    D  ADDR  00A0H     A   
RB8 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.2   A   
RCAP2H. . . . . . . . . . . . . . . . .    D  ADDR  00CBH     A   
RCAP2L. . . . . . . . . . . . . . . . .    D  ADDR  00CAH     A   
RCLK. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.5   A   
REGX_CTRL . . . . . . . . . . . . . . .    D  ADDR  00ADH     A   
REGX_LSB. . . . . . . . . . . . . . . .    D  ADDR  00ACH     A   
REGX_MSB. . . . . . . . . . . . . . . .    D  ADDR  00ABH     A   
REN . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.4   A   
RI. . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.0   A   
RS0 . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.3   A   
RS1 . . . . . . . . . . . . . . . . . .    B  ADDR  00D0H.4   A   
RSTREAS . . . . . . . . . . . . . . . .    D  ADDR  00B1H     A   
RXD . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.1   A   
SBUF. . . . . . . . . . . . . . . . . .    D  ADDR  0099H     A   
SCON. . . . . . . . . . . . . . . . . .    D  ADDR  0098H     A   
SEG?140 . . . . . . . . . . . . . . . .    D  ADDR  0004H     R   SEG=?DT?ECO_PAGE_MANAGER?ECO_PAGE
SM0 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.7   A   
SM1 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.6   A   
SM2 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.5   A   
SP. . . . . . . . . . . . . . . . . . .    D  ADDR  0081H     A   
SPC_FNC . . . . . . . . . . . . . . . .    D  ADDR  008FH     A   
SPI_CTRL. . . . . . . . . . . . . . . .    D  ADDR  00B3H     A   
SPI_DATA. . . . . . . . . . . . . . . .    D  ADDR  00B2H     A   
SPICLK. . . . . . . . . . . . . . . . .    D  ADDR  00B4H     A   
T0. . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.5   A   
T1. . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.6   A   
T1_1V2. . . . . . . . . . . . . . . . .    D  ADDR  00BCH     A   
T2. . . . . . . . . . . . . . . . . . .    B  ADDR  0090H.0   A   
T2_1V2. . . . . . . . . . . . . . . . .    D  ADDR  00BDH     A   
T2CON . . . . . . . . . . . . . . . . .    D  ADDR  00C8H     A   
TB8 . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.3   A   
TCLK. . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.4   A   
TCON. . . . . . . . . . . . . . . . . .    D  ADDR  0088H     A   
TEST_MODE . . . . . . . . . . . . . . .    D  ADDR  00B7H     A   
TF0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.5   A   
TF1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.7   A   
TF2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.7   A   
TH0 . . . . . . . . . . . . . . . . . .    D  ADDR  008CH     A   
AX51 MACRO ASSEMBLER  ECO_PAGE                                                              05/03/09 17:14:18 PAGE    16

TH1 . . . . . . . . . . . . . . . . . .    D  ADDR  008DH     A   
TH2 . . . . . . . . . . . . . . . . . .    D  ADDR  00CDH     A   
TI. . . . . . . . . . . . . . . . . . .    B  ADDR  0098H.1   A   
TICK_DV . . . . . . . . . . . . . . . .    D  ADDR  00B5H     A   
TL0 . . . . . . . . . . . . . . . . . .    D  ADDR  008AH     A   
TL1 . . . . . . . . . . . . . . . . . .    D  ADDR  008BH     A   
TL2 . . . . . . . . . . . . . . . . . .    D  ADDR  00CCH     A   
TMOD. . . . . . . . . . . . . . . . . .    D  ADDR  0089H     A   
TR0 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.4   A   
TR1 . . . . . . . . . . . . . . . . . .    B  ADDR  0088H.6   A   
TR2 . . . . . . . . . . . . . . . . . .    B  ADDR  00C8H.2   A   
TXD . . . . . . . . . . . . . . . . . .    B  ADDR  0080H.2   A   
WDTI. . . . . . . . . . . . . . . . . .    B  ADDR  00D8H.3   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S).
